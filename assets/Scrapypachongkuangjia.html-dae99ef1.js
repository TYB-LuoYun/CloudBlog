import{_ as c,r as u,o as g,c as l,a as t,b as e,d as s,e as a}from"./app-7534611f.js";const q="/assets/image1-03b433dc.png",m="/assets/image2-3bb5591b.png",b="/assets/image3-6ad1b8dc.png",f="/assets/image4-37ca6a0f.png",x="/assets/image5-38a51d17.png",w="/assets/image6-12d532bb.png",A="/assets/image7-364ffdba.png",y="/assets/image8-a72eeef6.png",_="/assets/image9-97e9fe05.png",v="/assets/image10-e37eaf0b.png",k="/assets/image11-447db187.png",r="/assets/image12-749b48b7.png",I="/assets/image13-ce73db6f.png",j="/assets/image14-ecd03e2d.png",X="/assets/image15-fb2d6f2d.png",R="/assets/image16-3b5c66fa.png",C="/assets/image17-a4497309.png",V="/assets/image18-d52a2ced.png",D="/assets/image19-22f10273.png",E="/assets/image20-e161a910.png",U="/assets/image21-d069cdc1.png",O="/assets/image22-4db02a9a.png",z="/assets/image23-57b6d72e.png",o="/assets/image24-f42aeefe.png",S="/assets/image25-f10452ab.png",W="/assets/image26-64e4a44f.png",T="/assets/image27-a312ec16.png",J="/assets/image28-00564eac.png",H="/assets/image29-f37912ad.png",L="/assets/image30-05b40aba.png",P="/assets/image31-32c66358.png",Q="/assets/image32-2a24f931.png",Z="/assets/image33-2a869988.png",B="/assets/image34-ffbac1be.png",M="data:image/png;base64,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",G="/assets/image36-27228ef3.png",N="/assets/image37-c1b67de5.png",Y="data:image/png;base64,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",F="/assets/image39-e035e60e.png",K="/assets/image40-8317f1f6.png",$="/assets/image41-21f6b26d.png",ee="/assets/image42-fa038399.png",te="/assets/image43-62e9a466.png",ae="/assets/image44-7df01048.png",ie="/assets/image45-c2381f98.png",se="/assets/image46-4d57f217.png",re="/assets/image47-cfb11f55.png",ne="/assets/image48-60f47a1e.png",oe="/assets/image49-1f6f1bb2.png",he="/assets/image50-0f8642d3.png",pe="/assets/image51-132abf2b.png",de="/assets/image52-86a332be.png",ce="/assets/image53-a70e2a3e.png",ue="/assets/image54-b4f7683d.png",ge="/assets/image55-d60b04a5.png",le="/assets/image56-da5d2c7f.png",qe="/assets/image57-bb02cbc1.png",me="data:image/png;base64,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",be="/assets/image59-605b0c76.png",fe="/assets/image60-fb463943.png",xe="data:image/png;base64,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",we="/assets/image62-df2e78a1.png",Ae="/assets/image63-63312557.png",ye="/assets/image64-550de1e5.png",_e="/assets/image65-0aa52a5d.png",ve="/assets/image66-eeb3e26b.png",ke="/assets/image67-dcbe865c.png",Ie="/assets/image68-62e71a24.png",h="/assets/image69-65607787.png",je="/assets/image70-1f94db5f.png",Xe="/assets/image71-db47b3e8.png",Re="/assets/image72-60ce0fa5.png",Ce="/assets/image73-397f4c1f.png",Ve="/assets/image74-76789770.png",p="/assets/image75-650c8ace.png",d="/assets/image76-4636b3c0.png",De="/assets/image77-0cb028d9.png",Ee="/assets/image78-1b5ec7a8.png",Ue="/assets/image79-c2754bec.png",Oe="/assets/image80-9772615e.png",ze="/assets/image81-8e7cf402.png",Se="/assets/image82-e053d9d6.png",We="/assets/image83-394dd7ef.png",Te="/assets/image84-fa741219.png",Je="/assets/image85-7bed3f81.png",He="/assets/image86-63a759f3.png",Le="/assets/image87-b72d68d1.png",Pe="/assets/image88-17015999.png",Qe="/assets/image89-121ab8c6.png",Ze="/assets/image90-d80a1ccb.png",Be="/assets/image91-84295a46.png",Me="/assets/image92-3c6be897.png",Ge="/assets/image93-fb33df21.png",Ne="/assets/image94-1ad54b82.png",Ye="/assets/image95-21c1e22b.png",Fe="/assets/image96-dc97f568.png",Ke="/assets/image97-a1cfa0cf.png",$e="/assets/image98-5c09347d.png",et="/assets/image99-9a2c9934.png",tt="/assets/image100-e4464b0f.png",at="/assets/image101-da54940e.png",it="/assets/image102-21418452.png",st="/assets/image103-843607a3.png",rt="/assets/image104-7a5ecda7.png",nt="/assets/image105-180792de.png",ot="/assets/image106-bee33a53.png",ht="/assets/image107-d0900dc9.png",pt="/assets/image108-f7be0fdc.png",dt="/assets/image109-01d315a8.png",ct="/assets/image110-c471e147.png",ut="/assets/image111-14c4677e.png",gt="/assets/image112-5cea3883.png",lt="/assets/image113-e5e2ee08.png",qt="/assets/image114-11738c99.png",mt="/assets/image115-f63b8b71.png",bt="/assets/image116-73313c8f.png",ft="/assets/image117-2dd2158b.png",xt="/assets/image118-4b8732a6.png",wt="/assets/image119-a6f7f9ca.png",At="/assets/image120-9d0bbc48.png",yt="/assets/image121-9552baba.png",_t="/assets/image122-d9341750.png",vt="/assets/image123-25110a28.png",kt="/assets/image124-4157c048.png",It="/assets/image125-7166f86b.png",jt="/assets/image126-58155408.png",Xt="data:image/png;base64,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",Rt="/assets/image128-7a54ac6a.png",Ct="/assets/image129-8990611d.png",Vt="/assets/image130-11f6b67d.png",Dt="/assets/image131-837e8a77.png",Et="/assets/image132-be2d9ecf.png",Ut="/assets/image133-7e057d90.png",Ot="/assets/image134-bc83e630.png",zt="/assets/image135-21495173.png",St="/assets/image136-4100c5ed.png",Wt="/assets/image137-ccca5b0f.png",Tt="/assets/image138-12e9cb90.png",Jt="/assets/image139-c3af919c.png",Ht="/assets/image140-38bc34a8.png",Lt="/assets/image141-35da4ee9.png",Pt="/assets/image142-cb154922.png",Qt="/assets/image143-e327b42a.png",Zt="/assets/image144-71b06f2a.png",Bt="/assets/image145-07af1278.png",Mt="/assets/image146-ac3cf71f.png",Gt="/assets/image147-cedd7460.png",Nt="/assets/image148-a301e53f.png",Yt="/assets/image149-5d46ecd4.png",Ft="/assets/image150-21a8e6f8.png",Kt="/assets/image151-aaf1534e.png",$t="/assets/image152-b34102c4.png",ea="/assets/image153-84e32ef1.png",ta="/assets/image154-cb304d88.png",aa="/assets/image155-5393693d.png",ia="/assets/image156-0e8ddbd1.png",sa="/assets/image157-e2c00940.png",ra="/assets/image158-0be064c2.png",na="/assets/image159-ac9eef26.png",oa="/assets/image160-37ceece7.png",ha="/assets/image161-672b2d25.png",pa="/assets/image162-a2f2c27c.png",da="/assets/image163-3ff404ba.png",ca="/assets/image164-de783dfb.png",ua="/assets/image165-81c5b3cd.png",ga="/assets/image166-865ce1a0.png",la="/assets/image167-e4b37e9c.png",qa="/assets/image168-91974118.png",ma="/assets/image169-a9c9542c.png",ba="/assets/image170-d52bb5b0.png",fa="/assets/image171-7f4a11d9.png",xa="/assets/image172-993edf23.png",wa="/assets/image173-d04567dd.png",Aa="/assets/image174-77347186.png",ya="/assets/image175-b0c42cf8.png",_a="/assets/image176-e0a75b38.png",va="/assets/image177-e948c18b.png",ka="/assets/image178-0c6f21b5.png",Ia="/assets/image179-85da50a2.png",ja="/assets/image180-aae9cdb1.png",n="/assets/image181-8798203d.png",Xa="/assets/image182-74f84a5c.png",Ra={},Ca=a('<h1 id="环境搭建" tabindex="-1"><a class="header-anchor" href="#环境搭建" aria-hidden="true">#</a> <strong>环境搭建</strong></h1><h2 id="windows和linux安装python2和python3" tabindex="-1"><a class="header-anchor" href="#windows和linux安装python2和python3" aria-hidden="true">#</a> windows和linux安装python2和python3</h2><p>1官网选择版本python2下载</p><p><img src="'+q+'" alt="">{width=&quot;5.763888888888889in&quot; height=&quot;2.907638888888889in&quot;}</p><p>2安装即可</p><p>3命令行输入 python查看版本</p><p><img src="'+m+'" alt="">{width=&quot;5.761111111111111in&quot; height=&quot;0.5805555555555556in&quot;}</p><p>====安装python3.5.3</p><p>1官网下载</p><p><img src="'+b+'" alt="">{width=&quot;5.758333333333334in&quot; height=&quot;3.1381944444444443in&quot;}</p><p>2配置环境变量</p><p>....</p><p><img src="'+f+'" alt="">{width=&quot;5.767361111111111in&quot; height=&quot;5.35625in&quot;}</p><p>=====linux安装</p><p>1sudo apt-get install python3.5</p><h2 id="python虚拟环境安装" tabindex="-1"><a class="header-anchor" href="#python虚拟环境安装" aria-hidden="true">#</a> python虚拟环境安装</h2><p>=================================window安装虚拟环境======================</p><p>1安装python虚拟环境，好处 将开发环境相互隔离， 使不同项目可以使用不同python版本</p><p>命令</p><p>pip install virtualenv</p><p>2安装项目(使用镜像，以django为例子)</p>',21),Va={href:"http://pypi.douban.com/simple/",target:"_blank",rel:"noopener noreferrer"},Da=a('<p>卸载命令pip uninstall django</p><p>3</p><p>======》在当前目录 新建项目用默认的python环境</p><p>virtualenv 项目名</p><p>======》在当前目录 新建项目用自定义的python环境</p><p>virtualenv -p 你python安装根目录位置/python.exe 项目名</p><p>4进入这个虚拟环境</p><p>进入这个项目目录，然后进入Scripts文件夹</p><p>然后运行 activate.bat命令</p><p>之后就可以运行python相关命令了</p><p>退出虚拟环境</p><p>deactivate.bat 命令</p><p>=================================linux安装虚拟环境======================</p><p>1sudo apt-get install python-virtualenv</p><p>2======》在当前目录 新建项目用默认的python环境</p><p>virtualenv 项目名</p><p>3======》在当前目录 新建项目用自定义的python环境</p><p>virtualenv -p 你python安装根目录位置/python.exe 项目名</p><p>4进入这个虚拟环境</p><p>进入这个项目目录，然后进入bin文件夹</p><p>然后运行source activate命令</p><p>之后就可以运行python相关命令了</p><p>退出虚拟环境</p><p>deactivate 命令</p><h2 id="python虚拟环境管理工具" tabindex="-1"><a class="header-anchor" href="#python虚拟环境管理工具" aria-hidden="true">#</a> <strong>python虚拟环境管理工具</strong></h2><p>=================================虚拟环境管理包(window下)======================</p><p>1安装：<strong>管理员模式运行cmd才行。</strong></p><p>pip install virtualenvwrapper-win</p><p>2配置环境变量---配置默认的项目在哪个目录创建</p><p><img src="'+x+'" alt="">{width=&quot;5.7625in&quot; height=&quot;1.6145833333333333in&quot;}</p><p>修改后重启cmd</p><p>2列出所配置目录中的所有虚拟环境</p><p>workon</p><p>3使用默认python环境新建项目</p><p>mkvirtualenv 项目名</p><p>使用自定义python版本创建项目</p><p>mkvirtualenv --python 安装的python根目录\\python.exe 项目名</p><p>创建后会自动进入项目环境，</p><p>4使用deactivate退出环境</p><p>5使用workon 项目名 进入环境</p><p>=================================虚拟环境管理包(linux下)======================</p><p>1安装：<strong>管理员模式运行cmd才行。</strong></p><p>pip install virtualenvwrapper</p><p>2找到默认安装目录</p><p>sudo find / -name virtualenvwrappe.sh</p><p>复制路径配置环境变量</p><p>2配置环境变量---配置默认的项目在哪个目录创建</p><p>进入配置文件</p><p>vim ~/.bashrc</p><p><img src="'+w+'" alt="">{width=&quot;5.763888888888889in&quot; height=&quot;2.370833333333333in&quot;}</p><p>修改后</p><p>source ~/.bashrc</p><p>2列出所配置目录中的所有虚拟环境</p><p>workon</p><p>3使用默认python环境新建项目</p><p>mkvirtualenv 项目名</p><p>使用自定义python版本创建项目</p><p>mkvirtualenv --python 安装的python根目录\\python.exe 项目名</p><p>创建后会自动进入项目环境，</p><p>4使用deactivate退出环境</p><p>5使用workon 项目名 进入环境</p><h2 id="在虚拟环境中安装项目" tabindex="-1"><a class="header-anchor" href="#在虚拟环境中安装项目" aria-hidden="true">#</a> 在虚拟环境中安装项目</h2><h3 id="安装scray" tabindex="-1"><a class="header-anchor" href="#安装scray" aria-hidden="true">#</a> 安装scray</h3><p>1首先通过虚拟环境管理创建项目</p><p>mkvirtualenv 项目名</p><p>创建后会自动进入该目录或使用</p><p>workon 项目名</p><p>进入项目目录</p><p>2在项目目录安装依赖包</p><p>pip install -i https://pypi.douban.com/simple/ scrapy</p><p>3出错：</p><p><img src="'+A+'" alt="">{width=&quot;5.7625in&quot; height=&quot;1.8152777777777778in&quot;}</p><p>安装项目失败势进入这个网址找到python版本所对应的依赖版本下载并安装</p>',73),Ea={href:"https://www.lfd.uci.edu/~gohlke/pythonlibs/",target:"_blank",rel:"noopener noreferrer"},Ua=a('<p>找到后下载，后进入项目所在环境，运行pip install 下载的文件地址安装</p><p>依赖弄好后，重新安装</p><p><img src="'+y+'" alt="">{width=&quot;5.767361111111111in&quot; height=&quot;5.448611111111111in&quot;}</p><h1 id="爬虫基础知识" tabindex="-1"><a class="header-anchor" href="#爬虫基础知识" aria-hidden="true">#</a> 爬虫基础知识</h1><h2 id="scrapy与requests-beautifulsoup区别" tabindex="-1"><a class="header-anchor" href="#scrapy与requests-beautifulsoup区别" aria-hidden="true">#</a> scrapy与requests+beautifulsoup区别</h2><p><img src="'+_+'" alt="">{width=&quot;5.763194444444444in&quot; height=&quot;1.93125in&quot;}</p><h2 id="网页分类与爬虫作用" tabindex="-1"><a class="header-anchor" href="#网页分类与爬虫作用" aria-hidden="true">#</a> 网页分类与爬虫作用</h2><p>1静态网页</p><p>2动态网页</p><p>3webservice(restapi)</p><p>作用：</p><p>搜索引擎---百度(爬取所有页面),垂直领域搜索引擎(只搜索某类信息)</p><p>推荐引擎---今日头条</p><p>机器学习的数据样本</p><p>数据分析(金融数据分析)，舆情分析</p><h2 id="正则" tabindex="-1"><a class="header-anchor" href="#正则" aria-hidden="true">#</a> 正则</h2><p><img src="'+v+'" alt="">{width=&quot;5.761805555555555in&quot; height=&quot;1.8763888888888889in&quot;}</p><h2 id="字符串编码" tabindex="-1"><a class="header-anchor" href="#字符串编码" aria-hidden="true">#</a> 字符串编码</h2><p>1计算机只处理数字</p><p>2 8个位一个字节</p><p>3一个字节能表示最大数255</p><p>4用一个字节的ascii码表示字符 <strong>ASCII编码---美国人标准编码</strong></p><p>5但是，中文来说，指定了GB2312编码</p><p>用2个字节代表一个汉字 <strong>GB2312-----用2个字节代表一个汉字(包含了ascii码)</strong></p><p>6不同国家不同编码，为了统一到一套编码，出现 <strong>unicode编码---统一不同国家编码</strong></p><p><img src="'+k+'" alt="">{width=&quot;5.761805555555555in&quot; height=&quot;1.7006944444444445in&quot;}</p><p>7为了解决unidode编码浪费空间问题，出现了 <strong>utf-8编码---可变长统一不同国家的编码</strong></p><p>英文1个字节</p><p>汉字3个字节，生僻字4-6字节</p><h3 id="不同编码不同场景" tabindex="-1"><a class="header-anchor" href="#不同编码不同场景" aria-hidden="true">#</a> 不同编码不同场景</h3><p><img src="'+r+'" alt="">{width=&quot;5.767361111111111in&quot; height=&quot;3.4506944444444443in&quot;}</p><h3 id="默认编码" tabindex="-1"><a class="header-anchor" href="#默认编码" aria-hidden="true">#</a> <strong>默认编码</strong></h3><p>window gb2312</p><p>linux utf8</p><h3 id="编码解码unicode-utf-8" tabindex="-1"><a class="header-anchor" href="#编码解码unicode-utf-8" aria-hidden="true">#</a> 编码解码unicode | utf-8</h3><p><img src="'+r+'" alt="">{width=&quot;5.767361111111111in&quot; height=&quot;3.4506944444444443in&quot;}</p><h4 id="字符串指定编码" tabindex="-1"><a class="header-anchor" href="#字符串指定编码" aria-hidden="true">#</a> <strong>字符串指定编码</strong></h4><p>默认utf-8</p><p>指定unicode通过</p><p>s=u&quot;字符串&quot;</p><h4 id="encode编码-将二进制-unicode-编成其它编码" tabindex="-1"><a class="header-anchor" href="#encode编码-将二进制-unicode-编成其它编码" aria-hidden="true">#</a> encode编码---将二进制（unicode）编成其它编码</h4><p>s.encode(&#39;utf8&#39;)</p><p>想将s编码为utf8，s必须是unicode才行</p><p>若s是gb2312编码</p><p>则</p><p>s.decode(&quot;gb2312&quot;).encode(&quot;utf8&quot;)</p><h4 id="decode-其它编码类型-解码-将其它编码的字符串变成二进制-unicode" tabindex="-1"><a class="header-anchor" href="#decode-其它编码类型-解码-将其它编码的字符串变成二进制-unicode" aria-hidden="true">#</a> decode(&#39;其它编码类型&#39;)解码----将其它编码的字符串变成二进制（unicode）</h4><h2 id="爬虫时的编码问题" tabindex="-1"><a class="header-anchor" href="#爬虫时的编码问题" aria-hidden="true">#</a> <strong>爬虫时的编码问题</strong></h2><h3 id="gbk-codec-can-t-encode-character-xa0" tabindex="-1"><a class="header-anchor" href="#gbk-codec-can-t-encode-character-xa0" aria-hidden="true">#</a> &#39;gbk&#39; codec can&#39;t encode character &#39;\\xa0&#39;</h3><p>文本..encode(&quot;utf-8&quot;).decode(&#39;utf-8&#39;, &#39;ignore&#39;).replace(u&#39;\\xa0&#39;, u&#39;&#39;)</p><p>注意xa0，有时会变化，要根据提示来</p><h2 id="深度优先和广度优先" tabindex="-1"><a class="header-anchor" href="#深度优先和广度优先" aria-hidden="true">#</a> <strong>深度优先和广度优先</strong></h2><h3 id="网站url树结构" tabindex="-1"><a class="header-anchor" href="#网站url树结构" aria-hidden="true">#</a> 网站url树结构</h3><p>简单</p><p><img src="'+I+'" alt="">{width=&quot;5.754166666666666in&quot; height=&quot;2.4118055555555555in&quot;}</p><p>有环(大部分都这样)</p><p><img src="'+j+'" alt="">{width=&quot;5.768055555555556in&quot; height=&quot;2.6125in&quot;}</p><h3 id="深度优先-递归算法实现" tabindex="-1"><a class="header-anchor" href="#深度优先-递归算法实现" aria-hidden="true">#</a> <strong>深度优先(递归算法实现)</strong></h3><p><img src="'+X+'" alt="">{width=&quot;5.408333333333333in&quot; height=&quot;3.3583333333333334in&quot;}</p><h4 id="算法实现" tabindex="-1"><a class="header-anchor" href="#算法实现" aria-hidden="true">#</a> 算法实现</h4><p><img src="'+R+'" alt="">{width=&quot;5.768055555555556in&quot; height=&quot;1.8409722222222222in&quot;}</p><h3 id="广度优先-队列算法实现" tabindex="-1"><a class="header-anchor" href="#广度优先-队列算法实现" aria-hidden="true">#</a> <strong>广度优先(队列算法实现)</strong></h3><p><img src="'+C+'" alt="">{width=&quot;5.766666666666667in&quot; height=&quot;2.9243055555555557in&quot;}</p><h4 id="算法实现-1" tabindex="-1"><a class="header-anchor" href="#算法实现-1" aria-hidden="true">#</a> 算法实现</h4><p><img src="'+V+'" alt="">{width=&quot;5.767361111111111in&quot; height=&quot;4.079166666666667in&quot;}</p><h2 id="爬虫去重策略" tabindex="-1"><a class="header-anchor" href="#爬虫去重策略" aria-hidden="true">#</a> 爬虫去重策略</h2><p>爬虫需要去重，不然陷入不停的循环</p><ol><li><p>将url保存于数据库，下一次查询是否被获取过了，简单效率低</p></li><li><p>将访问过的url保存到set中，缺点是内存占用会越来越大</p></li><li><p><strong>url经过MD5编码变成固定长度保存到set，节省内存(推荐)</strong></p></li><li><p>用bitmap()方法，将访问过的url通过hash函数映射到每一位，一个位确定一个url，能进一步节省内存，但是冲突很高</p></li><li><p><strong>bloomfilter()方法对bitmap改进，多重hash函数降低冲突，也更节省内存(推荐)</strong></p></li></ol><h2 id="session与cookie" tabindex="-1"><a class="header-anchor" href="#session与cookie" aria-hidden="true">#</a> <strong>session与cookie</strong></h2><p><strong>http是无状态的请求</strong></p><p>有状态的请求通过cookie记录登陆信息(不安全)和sessio(安全，session也是借助cookie实现通过sessionid)实现</p><p>session存放的信息是安全的，原因在于它通过只存sessionid到cookie中，当用户通过sessionid访问时，服务端根据sessionid查询用户信息</p><p>这个过程中，用户只有sessionid</p><h2 id="http状态码" tabindex="-1"><a class="header-anchor" href="#http状态码" aria-hidden="true">#</a> <strong>http状态码</strong></h2><p>404页面和状态码，有利于搜索引擎优化</p><p><img src="'+D+'" alt="">{width=&quot;5.764583333333333in&quot; height=&quot;2.4166666666666665in&quot;}</p><h1 id="爬虫需要的库-核心" tabindex="-1"><a class="header-anchor" href="#爬虫需要的库-核心" aria-hidden="true">#</a> <strong>爬虫需要的库---核心</strong></h1><h2 id="scrapy库" tabindex="-1"><a class="header-anchor" href="#scrapy库" aria-hidden="true">#</a> <strong>scrapy库</strong></h2><h3 id="生成爬虫spider-继承scrapy-spider-scrapy-genspider-任务名-域名" tabindex="-1"><a class="header-anchor" href="#生成爬虫spider-继承scrapy-spider-scrapy-genspider-任务名-域名" aria-hidden="true">#</a> <strong>生成爬虫spider----继承scrapy.spider | scrapy genspider 任务名 域名</strong></h3><h3 id="运行爬虫任务-scrapy-crawl-任务名" tabindex="-1"><a class="header-anchor" href="#运行爬虫任务-scrapy-crawl-任务名" aria-hidden="true">#</a> 运行爬虫任务|scrapy crawl 任务名</h3><h3 id="对某url获取的内容快速调试" tabindex="-1"><a class="header-anchor" href="#对某url获取的内容快速调试" aria-hidden="true">#</a> <strong>对某url获取的内容快速调试</strong></h3><p>在命令行输入</p><p>scrapy shell url网址</p><p><img src="'+E+'" alt="">{width=&quot;5.761805555555555in&quot; height=&quot;1.7944444444444445in&quot;}</p><p><img src="'+U+'" alt="">{width=&quot;5.766666666666667in&quot; height=&quot;1.6666666666666667in&quot;}</p><h4 id="配置代理" tabindex="-1"><a class="header-anchor" href="#配置代理" aria-hidden="true">#</a> 配置代理</h4><p>scrapy shell -s USER_AGENT=&quot;...&quot; url网址</p><h3 id="main-js中代码运行爬虫任务" tabindex="-1"><a class="header-anchor" href="#main-js中代码运行爬虫任务" aria-hidden="true">#</a> <strong>main.js中代码运行爬虫任务</strong></h3><p>from scrapy import cmdline</p><p>cmdline.execute(&#39;scrapy crawl okzyw&#39;.split(&#39; &#39;))</p><p><img src="'+O+'" alt="">{width=&quot;5.761805555555555in&quot; height=&quot;3.529166666666667in&quot;}</p><h3 id="spider模块-爬虫解析" tabindex="-1"><a class="header-anchor" href="#spider模块-爬虫解析" aria-hidden="true">#</a> <strong>Spider模块----爬虫解析</strong></h3><p><img src="'+z+'" alt="">{width=&quot;5.768055555555556in&quot; height=&quot;2.154166666666667in&quot;}</p><h4 id="可重写的方法" tabindex="-1"><a class="header-anchor" href="#可重写的方法" aria-hidden="true">#</a> <strong>可重写的方法</strong></h4><h5 id="start-requests-self-在parse之前执行-必须返回数组-数组中是response" tabindex="-1"><a class="header-anchor" href="#start-requests-self-在parse之前执行-必须返回数组-数组中是response" aria-hidden="true">#</a> <strong>start_requests(self) -----在parse之前执行，必须返回数组，数组中是response</strong></h5><h5 id="parse-self-response-在爬取页面完之后运行这个方法-response是内容对象" tabindex="-1"><a class="header-anchor" href="#parse-self-response-在爬取页面完之后运行这个方法-response是内容对象" aria-hidden="true">#</a> parse(self,response)-----在爬取页面完之后运行这个方法，response是内容对象</h5><h6 id="response类型" tabindex="-1"><a class="header-anchor" href="#response类型" aria-hidden="true">#</a> <strong>response类型</strong></h6><p>**url ：**HTTP响应的url地址,<strong>str类型</strong></p><p>**status：**HTTP响应的状态码, <strong>int类型</strong></p><p>**headers ：**HTTP响应的头部, 类字典类型, 可以调用get或者getlist方法对其进行访问</p><p>**body：**HTTP响应正文, <strong>bytes类型</strong></p><p>**text：**文本形式的HTTP响应正文, <strong>str类型</strong></p><p><strong>response.text = response.body.decode(response.encoding)</strong></p><p>**encoding：**HTTP响应正文的编码</p><p>**reqeust：**产生该HTTP响应的Reqeust对象</p><p>**meta：**即response.request.meta, 在构造Request对象时, 可将要传递给响应处理函数的信息通过meta参数传入, 响应处理函数处理响应时, 通过response.meta将信息提取出来</p><p>**selector：**Selector对象用于在Response中提取数据使用下面详细将,主要是 <strong>xpath,css取值之后的处理</strong></p><p>**xpath(query)：**下面详细讲解</p><p>**css(query) ：**下面详细讲解</p><p>**urljoin(url) ：**用于构造绝对url, 当传入的url参数是一个相对地址时, 根据response.url计算出相应的绝对url.</p><h6 id="response-xpath-可以找到具体元素-返回值-selectorlist" tabindex="-1"><a class="header-anchor" href="#response-xpath-可以找到具体元素-返回值-selectorlist" aria-hidden="true">#</a> response.xpath(&#39;&#39;)---可以找到具体元素|返回值 -- SelectorList</h6><p>####### SelectorList</p><p>输出文本|.extract()[0] 或者.extract_first(&quot;&quot;)</p><p>区别在于前者数组为空时会抛出异常，后者默认返回空字符串，当然也可以自定义</p><p><img src="'+o+'" alt="">{width=&quot;5.7652777777777775in&quot; height=&quot;1.5951388888888889in&quot;}</p><p>####### <strong>xpath库</strong></p><p><img src="'+S+'" alt="">{width=&quot;5.767361111111111in&quot; height=&quot;2.808333333333333in&quot;}<img src="'+W+'" alt="">{width=&quot;5.767361111111111in&quot; height=&quot;2.4319444444444445in&quot;}<img src="'+T+'" alt="">{width=&quot;5.767361111111111in&quot; height=&quot;2.1284722222222223in&quot;}</p><p>元素定位</p><p>class定位</p><p>1response.xpath(&#39;//div[@class=&quot;1&quot;]/div[@class=&quot;2&quot;]/h2/text()&#39;)</p><p>全局找到class为1的div，然后在里面找class为2的div，再找到h2标签。通过text()获取文本节点</p><p>2如果一个元素有多个class 例如 &lt;p class=&quot;1 2 3&quot;&gt;&lt;/p&gt;</p><p>那么不应该使用=,应该包含</p><p>通过xpath(&#39;//p[<strong>contains(</strong>@class,&quot;1&quot;<strong>)</strong>]/text()&#39;)</p><p><strong>id定位</strong></p><p>1response.xpath(&#39;//[id=&quot;1&quot;]/h2/text()&#39;)</p><p>全局找到id为1的元素下面的标签中的文本</p><p><strong>属性定位</strong></p><p>xpath(&quot;//a[@href=&#39;...&#39;]&quot;)</p><h6 id="response-css-可以通过css找到具体元素-返回值-selectorlist" tabindex="-1"><a class="header-anchor" href="#response-css-可以通过css找到具体元素-返回值-selectorlist" aria-hidden="true">#</a> **response.css(&#39;&#39;) ---可以通过css找到具体元素|**返回值 -- SelectorList</h6><p>####### SelectorList</p><p>输出文本|.extract()[0] 或者.extract_first(&quot;&quot;)</p><p>区别在于前者数组为空时会抛出异常，后者默认返回空字符串，当然也可以自定义</p><p><img src="'+J+'" alt="">{width=&quot;2.95in&quot; height=&quot;3.225in&quot;}</p><p>####### <strong>css选择器库</strong></p><p><img src="'+H+'" alt="">{width=&quot;5.7659722222222225in&quot; height=&quot;2.879166666666667in&quot;}<img src="'+L+'" alt="">{width=&quot;5.7555555555555555in&quot; height=&quot;1.88125in&quot;}<img src="'+P+'" alt="">{width=&quot;5.7652777777777775in&quot; height=&quot;0.8215277777777777in&quot;}</p><p>元素定位|用法 css(&quot;标签+css选择器&quot;)或者css(&quot;css选择器&quot;)</p><p><strong>css(&quot;css选择器&quot;)</strong></p><p>css(&quot;.类 h1::text&quot;)</p><p>取到 类下的h1标签中的文本</p><p><strong>css(&quot;标签+css选择器&quot;)</strong></p><p>css(&quot;p.类名::text&quot;)</p><p>取到指定类名的p元素的文本</p><p>取文本：：text</p><p>css(&quot;p.类名::text&quot;)</p><p>取到指定类名的p元素的文本</p><p><strong>取属性：：attr(属性名)</strong></p><p>css(&quot;a::attr(href)&quot;)</p><p>取a标签的url</p><p><strong>css属性定位</strong></p><p><strong>css(&#39;a[href=&quot;..&quot;]&#39;)</strong></p><p><strong>css一个元素多个类表示方法</strong></p><p>比如&lt;p class=&quot;类1 类2&quot;&gt;&lt;/p&gt;</p><p>css(&quot;类1类2&quot;)</p><p><strong>css定位下一个兄弟节点</strong></p><p>css(&quot;当前选择器 + 下一个标签&quot;)</p><p>例如：</p><p>css(&quot;h1 + p&quot;)</p><p>找到h1标签后的p标签</p><h6 id="response-url-获取当前爬取的url" tabindex="-1"><a class="header-anchor" href="#response-url-获取当前爬取的url" aria-hidden="true">#</a> <strong>response.url |获取当前爬取的url</strong></h6><h6 id="response-text-获取响应文本" tabindex="-1"><a class="header-anchor" href="#response-text-获取响应文本" aria-hidden="true">#</a> <strong>response.text|获取响应文本</strong></h6><h4 id="本身模块功能" tabindex="-1"><a class="header-anchor" href="#本身模块功能" aria-hidden="true">#</a> <strong>本身模块功能</strong></h4><h5 id="发送请求-scrapy-request-url-headers-请求头-callback-请求后执行-如果不写回调函数-会调用parse方法" tabindex="-1"><a class="header-anchor" href="#发送请求-scrapy-request-url-headers-请求头-callback-请求后执行-如果不写回调函数-会调用parse方法" aria-hidden="true">#</a> 发送请求| scrapy.Request(&quot;url&quot;,headers=请求头,callback=请求后执行)---如果不写回调函数，会调用parse方法</h5><p>其中callback指向的函数能获取到请求返回的response</p><h5 id="发送表单提交请求-scrapy-formrequest-url-formdata-表单数据-headers-请求头数据-callback-下一步指向的函数" tabindex="-1"><a class="header-anchor" href="#发送表单提交请求-scrapy-formrequest-url-formdata-表单数据-headers-请求头数据-callback-下一步指向的函数" aria-hidden="true">#</a> <strong>发送表单提交请求|scrapy.FormRequest(url=&quot;&quot;,formdata=表单数据,headers=请求头数据,callback=下一步指向的函数)</strong></h5><h5 id="交给scrapy爬取url并回调-参数传递-yield-scray-request-url-url-callback-回调函数" tabindex="-1"><a class="header-anchor" href="#交给scrapy爬取url并回调-参数传递-yield-scray-request-url-url-callback-回调函数" aria-hidden="true">#</a> <strong>交给scrapy爬取url并回调---参数传递|yield scray .Request(url=&quot;url&quot;,callback=回调函数)</strong></h5><p>如果要传递给下一个回调函数 一些值，可以定义再meta属性里面</p><p>scrapy.Request自带Session与request</p><p>为了保证每个Request的session是同一个</p><p>要用yield交给下载器</p><p>==============</p><p>====比如</p><p>yield Request(url=&quot;url&quot;,meta={&quot;key&quot;:value}callback=回调函数)</p><p>注意meta={&quot;key&quot;:value}callback之间是连续的</p><p>====在回调函数的response取出传递过来的值</p><p>def myParse(self,response):</p><p>response.meta[&quot;key&quot;] -----以元组形式取，若空会抛异常</p><p>response.meta.get(&quot;key&quot;,&quot;&quot;) ----通过get方式取，取不到不抛异常，用定义的默认值填充</p><h3 id="item模块-相当于pojo实体类-将spider模块中的字段提取到item中处理-可以定义多个实体类" tabindex="-1"><a class="header-anchor" href="#item模块-相当于pojo实体类-将spider模块中的字段提取到item中处理-可以定义多个实体类" aria-hidden="true">#</a> <strong>Item模块(相当于pojo实体类)----将spider模块中的字段提取到Item中处理---可以定义多个实体类</strong></h3><h4 id="在item中声明自定义的item类以及在自定义的item类声明需要提取的字段" tabindex="-1"><a class="header-anchor" href="#在item中声明自定义的item类以及在自定义的item类声明需要提取的字段" aria-hidden="true">#</a> 在item中声明自定义的item类以及在自定义的item类声明需要提取的字段</h4><p><img src="'+Q+'" alt="">{width=&quot;5.7659722222222225in&quot; height=&quot;3.7694444444444444in&quot;}</p><h4 id="生成id" tabindex="-1"><a class="header-anchor" href="#生成id" aria-hidden="true">#</a> <strong>生成id</strong></h4><p><strong>md5根据url生成hashID</strong></p><p><img src="'+Z+'" alt="">{width=&quot;5.7659722222222225in&quot; height=&quot;1.1416666666666666in&quot;}</p><h4 id="封装方式1-在spider中将自定义的item类-实体类-导入到splider模块中在splider赋值填充" tabindex="-1"><a class="header-anchor" href="#封装方式1-在spider中将自定义的item类-实体类-导入到splider模块中在splider赋值填充" aria-hidden="true">#</a> <strong>(封装方式1)在spider中将自定义的Item类(实体类)导入到splider模块中在splider赋值填充</strong></h4><p>在spider模块中导入item类：</p><p>导入格式： from 项目名.items import 实体类</p><p>导入后的用法：</p><p>实体对象=实体类()</p><p>实体对象[&quot;字段&quot;]=.... #完成填充</p><p><img src="'+B+'" alt="">{width=&quot;5.759722222222222in&quot; height=&quot;4.834027777777778in&quot;}</p><h4 id="封装方式2-通过itemloader" tabindex="-1"><a class="header-anchor" href="#封装方式2-通过itemloader" aria-hidden="true">#</a> <strong>(封装方式2)通过ItemLoader</strong></h4><p>from scrapy.loader import ItemLoader</p><h5 id="例子" tabindex="-1"><a class="header-anchor" href="#例子" aria-hidden="true">#</a> <strong>例子</strong></h5><p><img src="'+M+'" alt="">{width=&quot;3.05in&quot; height=&quot;0.4083333333333333in&quot;}</p><p><img src="'+G+'" alt="">{width=&quot;5.763194444444444in&quot; height=&quot;3.7354166666666666in&quot;}</p><p>别人比较完整的：</p><p><img src="'+N+'" alt="">{width=&quot;5.7625in&quot; height=&quot;2.6465277777777776in&quot;}</p><h5 id="对象实例化-itemloader-itemloader-item-实体类对象-response-response" tabindex="-1"><a class="header-anchor" href="#对象实例化-itemloader-itemloader-item-实体类对象-response-response" aria-hidden="true">#</a> <strong>对象实例化|itemLoader=ItemLoader(item=实体类对象,response=response)</strong></h5><h6 id="添加字段和对应的值或规则-itemloader-add" tabindex="-1"><a class="header-anchor" href="#添加字段和对应的值或规则-itemloader-add" aria-hidden="true">#</a> <strong>添加字段和对应的值或规则|itemLoader.add*</strong></h6><p>####### add_value(&quot;字段&quot;,值) | 封装普通字段</p><p>####### <strong>add_css(&quot;字段&quot;,&quot;css选择器&quot;) |提取css选择器的内容封装到字段</strong></p><p>这样就不用写response.css(&#39;..&#39;)了</p><p>####### <strong>add_xpath(...)|提取xpath对应的内容封装到字段</strong></p><h6 id="解析规则并封装-task-itemloader-load-item" tabindex="-1"><a class="header-anchor" href="#解析规则并封装-task-itemloader-load-item" aria-hidden="true">#</a> <strong>解析规则并封装 | task=itemLoader.load_item()</strong></h6><h6 id="将任务交给scrapy-yield-task" tabindex="-1"><a class="header-anchor" href="#将任务交给scrapy-yield-task" aria-hidden="true">#</a> <strong>将任务交给scrapy | yield task</strong></h6><h5 id="解决封装值预处理的问题-过滤器" tabindex="-1"><a class="header-anchor" href="#解决封装值预处理的问题-过滤器" aria-hidden="true">#</a> <strong>解决封装值预处理的问题(过滤器)</strong></h5><p>在items.py中</p><p><img src="'+Y+'" alt="">{width=&quot;4.133333333333334in&quot; height=&quot;0.4083333333333333in&quot;}<img src="'+F+'" alt="">{width=&quot;5.766666666666667in&quot; height=&quot;5.840277777777778in&quot;}</p><p>匿名函数用法(暂时不看)：</p><p><img src="'+K+'" alt="">{width=&quot;5.763194444444444in&quot; height=&quot;1.6222222222222222in&quot;}</p><h5 id="解决封装值是list的问题" tabindex="-1"><a class="header-anchor" href="#解决封装值是list的问题" aria-hidden="true">#</a> <strong>解决封装值是list的问题</strong></h5><p><strong>在items.py中</strong></p><p><img src="'+$+'" alt="">{width=&quot;5.7652777777777775in&quot; height=&quot;4.718055555555556in&quot;}</p><h4 id="在splider中将填充后的item实体类对象交给pipelines模块处理" tabindex="-1"><a class="header-anchor" href="#在splider中将填充后的item实体类对象交给pipelines模块处理" aria-hidden="true">#</a> <strong>在splider中将填充后的item实体类对象交给pipelines模块处理</strong></h4><p>yield 实体对象 #将实体对象传递到pipelines中处理</p><p><img src="'+ee+'" alt="">{width=&quot;5.761805555555555in&quot; height=&quot;5.524305555555555in&quot;}</p><h4 id="注意" tabindex="-1"><a class="header-anchor" href="#注意" aria-hidden="true">#</a> 注意</h4><p>不能在实体类初始化</p><h4 id="补充" tabindex="-1"><a class="header-anchor" href="#补充" aria-hidden="true">#</a> <strong>补充</strong></h4><h5 id="实体类也可以定义函数-后在pipeline中调用" tabindex="-1"><a class="header-anchor" href="#实体类也可以定义函数-后在pipeline中调用" aria-hidden="true">#</a> 实体类也可以定义函数，后在pipeline中调用</h5><p><img src="'+te+'" alt="">{width=&quot;5.7659722222222225in&quot; height=&quot;1.4791666666666667in&quot;}</p><p>调用</p><p><img src="'+ae+'" alt="">{width=&quot;5.766666666666667in&quot; height=&quot;0.42916666666666664in&quot;}</p><h3 id="pipeline模块-对pojo处理-数据存储" tabindex="-1"><a class="header-anchor" href="#pipeline模块-对pojo处理-数据存储" aria-hidden="true">#</a> <strong>pipeline模块---对pojo处理---数据存储</strong></h3><h4 id="打开pipeline注释" tabindex="-1"><a class="header-anchor" href="#打开pipeline注释" aria-hidden="true">#</a> 打开pipeline注释</h4><p>在settings.py中</p><p><img src="'+ie+'" alt="">{width=&quot;5.7659722222222225in&quot; height=&quot;4.928472222222222in&quot;}</p><h4 id="一个pipeline如何识别多个item实体类" tabindex="-1"><a class="header-anchor" href="#一个pipeline如何识别多个item实体类" aria-hidden="true">#</a> <strong>一个pipeline如何识别多个item实体类</strong></h4><p>第一种方式：通过class名来区分(不推荐，写死了)</p><p>item.__class__.__name__==&quot;item实体类1&quot;</p><p><img src="'+se+'" alt="">{width=&quot;5.763888888888889in&quot; height=&quot;1.9243055555555555in&quot;}</p><p>第二种方式：</p><p>多个item在存储的时候只是sql语句不同，所以可以把这个sql语句在不同的item中定义一个相同的函数来处理</p><p>def get_insert_sql(self):</p><p>sql = &quot;&quot;&quot;</p><p>INSERT INTO film(id,name,url,types,timez) VALUES(%s,%s,%s,%s,%s)</p><p>&quot;&quot;&quot;</p><p>params = (self[&#39;id&#39;],self[&#39;name&#39;],self[&#39;url&#39;],self[&#39;types&#39;],self[&#39;timez&#39;])</p><p>return sql, params</p><p><img src="'+re+'" alt="">{width=&quot;5.7625in&quot; height=&quot;4.321527777777778in&quot;}</p><h4 id="实现自动下载图片" tabindex="-1"><a class="header-anchor" href="#实现自动下载图片" aria-hidden="true">#</a> 实现自动下载图片</h4><h5 id="在settings-py配置imagespipeline类-下载地址-存储路径-能实现自动下载图片" tabindex="-1"><a class="header-anchor" href="#在settings-py配置imagespipeline类-下载地址-存储路径-能实现自动下载图片" aria-hidden="true">#</a> 在settings.py配置ImagesPipeline类,下载地址，存储路径 ----能实现自动下载图片</h5><p><img src="'+ne+'" alt="">{width=&quot;5.7652777777777775in&quot; height=&quot;4.058333333333334in&quot;}</p><p>放大：</p><p><img src="'+oe+'" alt="">{width=&quot;5.7659722222222225in&quot; height=&quot;1.288888888888889in&quot;}</p><p>注意，运行可能报错说没有pil库，需要安装</p>',247),Oa={href:"https://pypi.douban.com/simple",target:"_blank",rel:"noopener noreferrer"},za=a('<p>注意：实体类imageurl字段必须是数组格式</p><h6 id="其它配置" tabindex="-1"><a class="header-anchor" href="#其它配置" aria-hidden="true">#</a> 其它配置</h6><p>#配置下载图片的最低宽度，高度要求</p><p>IMAGES_MIN_HEIGHT</p><p>IMAGES_MIN_WIDTH</p><h5 id="获取-imageurl字段-对应的下载路径" tabindex="-1"><a class="header-anchor" href="#获取-imageurl字段-对应的下载路径" aria-hidden="true">#</a> <strong>获取 imageurl字段 对应的下载路径</strong></h5><p>下载路径名是随机的</p><h6 id="自定义图片处理pipeline" tabindex="-1"><a class="header-anchor" href="#自定义图片处理pipeline" aria-hidden="true">#</a> <strong>自定义图片处理pipeline</strong></h6><p><img src="'+he+'" alt="">{width=&quot;5.7659722222222225in&quot; height=&quot;4.118055555555555in&quot;}</p><p>放大</p><p><img src="'+pe+'" alt="">{width=&quot;5.761111111111111in&quot; height=&quot;2.8680555555555554in&quot;}</p><h6 id="settings-py配置修改默认的imagepipeline处理类为自己的处理类" tabindex="-1"><a class="header-anchor" href="#settings-py配置修改默认的imagepipeline处理类为自己的处理类" aria-hidden="true">#</a> <strong>settings.py配置修改默认的ImagePipeline处理类为自己的处理类</strong></h6><p><img src="'+de+'" alt="">{width=&quot;5.763194444444444in&quot; height=&quot;3.8513888888888888in&quot;}</p><p>放大</p><p><img src="'+ce+'" alt="">{width=&quot;5.761111111111111in&quot; height=&quot;1.6590277777777778in&quot;}</p><h4 id="实现保存实体类为json数据" tabindex="-1"><a class="header-anchor" href="#实现保存实体类为json数据" aria-hidden="true">#</a> <strong>实现保存实体类为json数据</strong></h4><h5 id="写一个自定义的pipeline类" tabindex="-1"><a class="header-anchor" href="#写一个自定义的pipeline类" aria-hidden="true">#</a> 写一个自定义的pipeline类</h5><p><img src="'+ue+'" alt="">{width=&quot;5.7659722222222225in&quot; height=&quot;3.4694444444444446in&quot;}</p><p>放大：</p><p><img src="'+ge+'" alt="">{width=&quot;5.761805555555555in&quot; height=&quot;2.95625in&quot;}</p><h5 id="在settings-xml中配置自定义的类的执行顺序" tabindex="-1"><a class="header-anchor" href="#在settings-xml中配置自定义的类的执行顺序" aria-hidden="true">#</a> <strong>在settings.xml中配置自定义的类的执行顺序</strong></h5><p><img src="'+le+'" alt="">{width=&quot;5.763888888888889in&quot; height=&quot;3.5444444444444443in&quot;}</p><p>放大：</p><p><img src="'+qe+'" alt="">{width=&quot;5.764583333333333in&quot; height=&quot;1.882638888888889in&quot;}</p><h4 id="实现保存实体类为json数据另一种方式-还能保存为表格等形式" tabindex="-1"><a class="header-anchor" href="#实现保存实体类为json数据另一种方式-还能保存为表格等形式" aria-hidden="true">#</a> <strong>实现保存实体类为json数据另一种方式(还能保存为表格等形式)</strong></h4><p>pipeline中</p><p><img src="'+me+'" alt="">{width=&quot;3.6333333333333333in&quot; height=&quot;0.31666666666666665in&quot;}</p><p><img src="'+be+'" alt="">{width=&quot;5.759027777777778in&quot; height=&quot;1.8583333333333334in&quot;}</p><p>settings.xml中<img src="'+fe+'" alt="">{width=&quot;5.768055555555556in&quot; height=&quot;4.032638888888889in&quot;}</p><h4 id="同步实现保存实体类到数据库" tabindex="-1"><a class="header-anchor" href="#同步实现保存实体类到数据库" aria-hidden="true">#</a> <strong>同步实现保存实体类到数据库</strong></h4><h5 id="根据实体类字段建表" tabindex="-1"><a class="header-anchor" href="#根据实体类字段建表" aria-hidden="true">#</a> 根据实体类字段建表</h5><h5 id="在当前项目虚拟环境中安装mysql的驱动" tabindex="-1"><a class="header-anchor" href="#在当前项目虚拟环境中安装mysql的驱动" aria-hidden="true">#</a> <strong>在当前项目虚拟环境中安装mysql的驱动</strong></h5><p>pip install -i https://pypi.douban.com/simple mysqlclient</p><p>注意在linux下需要安装</p><p>yum install python devel mysql devel</p><h5 id="定义mysqlpipeline" tabindex="-1"><a class="header-anchor" href="#定义mysqlpipeline" aria-hidden="true">#</a> <strong>定义mysqlPipeline</strong></h5><p><img src="'+xe+'" alt="">{width=&quot;3.625in&quot; height=&quot;0.2833333333333333in&quot;}<img src="'+we+'" alt="">{width=&quot;5.766666666666667in&quot; height=&quot;1.801388888888889in&quot;}</p><h5 id="配置执行顺序" tabindex="-1"><a class="header-anchor" href="#配置执行顺序" aria-hidden="true">#</a> <strong>配置执行顺序</strong></h5><p><img src="'+Ae+'" alt="">{width=&quot;5.558333333333334in&quot; height=&quot;1.4333333333333333in&quot;}</p><h4 id="异步实现保存实体类到数据库-推荐" tabindex="-1"><a class="header-anchor" href="#异步实现保存实体类到数据库-推荐" aria-hidden="true">#</a> <strong>异步实现保存实体类到数据库--推荐</strong></h4><h5 id="在settings-py配置mysql基本信息" tabindex="-1"><a class="header-anchor" href="#在settings-py配置mysql基本信息" aria-hidden="true">#</a> 在settings.py配置mysql基本信息</h5><p><img src="'+ye+'" alt="">{width=&quot;5.7659722222222225in&quot; height=&quot;3.9604166666666667in&quot;}</p><h5 id="写自定义的pipeline类" tabindex="-1"><a class="header-anchor" href="#写自定义的pipeline类" aria-hidden="true">#</a> <strong>写自定义的pipeline类</strong></h5><p><img src="'+_e+'" alt="">{width=&quot;3.9916666666666667in&quot; height=&quot;1.0in&quot;}<img src="'+ve+'" alt="">{width=&quot;5.7659722222222225in&quot; height=&quot;5.238194444444445in&quot;}</p><h5 id="settings-py配置执行顺序" tabindex="-1"><a class="header-anchor" href="#settings-py配置执行顺序" aria-hidden="true">#</a> <strong>settings.py配置执行顺序</strong></h5><h2 id="补充-1" tabindex="-1"><a class="header-anchor" href="#补充-1" aria-hidden="true">#</a> <strong>补充</strong></h2><h3 id="生成爬虫crawl-继承crawlspider-scrapy-genspider-t-crawl-任务名-域名" tabindex="-1"><a class="header-anchor" href="#生成爬虫crawl-继承crawlspider-scrapy-genspider-t-crawl-任务名-域名" aria-hidden="true">#</a> <strong>生成爬虫crawl----继承crawlSpider |scrapy genspider -t crawl 任务名 域名</strong></h3><p>crawlSpider对spider进行了进一步包装</p><p>在crawlspider中不能重写parse函数</p><p>结构</p><p><img src="'+ke+'" alt="">{width=&quot;5.768055555555556in&quot; height=&quot;3.5909722222222222in&quot;}</p><p>这里，有空去学</p><h3 id="request参数" tabindex="-1"><a class="header-anchor" href="#request参数" aria-hidden="true">#</a> <strong>Request参数</strong></h3><p><img src="'+Ie+'" alt="">{width=&quot;5.759027777777778in&quot; height=&quot;0.5923611111111111in&quot;}</p><h3 id="底层思路" tabindex="-1"><a class="header-anchor" href="#底层思路" aria-hidden="true">#</a> <strong>底层思路</strong></h3><p>spider yield request 给engine,engine发送给scheduler ，然后downloaer下载页面完成后返回给engine,engine再交给spider</p><h3 id="selector对象-抓取网页元素" tabindex="-1"><a class="header-anchor" href="#selector对象-抓取网页元素" aria-hidden="true">#</a> <strong>selector对象-抓取网页元素</strong></h3><p><img src="'+o+'" alt="">{width=&quot;5.7652777777777775in&quot; height=&quot;1.5951388888888889in&quot;}</p><h4 id="css" tabindex="-1"><a class="header-anchor" href="#css" aria-hidden="true">#</a> .css（）</h4><h4 id="xpath" tabindex="-1"><a class="header-anchor" href="#xpath" aria-hidden="true">#</a> <strong>.xpath(&#39;....&#39;)</strong></h4><h5 id="取包裹中的文本" tabindex="-1"><a class="header-anchor" href="#取包裹中的文本" aria-hidden="true">#</a> 取包裹中的文本</h5><h4 id="extract-0-取对象中的文本" tabindex="-1"><a class="header-anchor" href="#extract-0-取对象中的文本" aria-hidden="true">#</a> <strong>.extract()[0] 取对象中的文本</strong></h4><h1 id="用scrapy爬取文章网站" tabindex="-1"><a class="header-anchor" href="#用scrapy爬取文章网站" aria-hidden="true">#</a> <strong>**用scrapy爬取文章网站</strong></h1><h2 id="新建项目" tabindex="-1"><a class="header-anchor" href="#新建项目" aria-hidden="true">#</a> 新建项目</h2><p>mkvirtualenv --python D:\\Develop\\python\\python.exe article</p><h2 id="安装scrapy依赖" tabindex="-1"><a class="header-anchor" href="#安装scrapy依赖" aria-hidden="true">#</a> 安装scrapy依赖</h2><p>pip install -i https://pypi.douban.com/simple/ scrapy</p><h2 id="新建scrapy工程" tabindex="-1"><a class="header-anchor" href="#新建scrapy工程" aria-hidden="true">#</a> <strong>新建scrapy工程</strong></h2><p>手动进入你的项目目录中，再进入该项目的运行环境workon 项目名</p><p>运行命令：</p><p>scrapy startproject 工程名</p><p><img src="'+h+'" alt="">{width=&quot;5.761111111111111in&quot; height=&quot;1.3069444444444445in&quot;}</p><h2 id="pycharm导入项目" tabindex="-1"><a class="header-anchor" href="#pycharm导入项目" aria-hidden="true">#</a> pycharm导入项目</h2><p><img src="'+je+'" alt="">{width=&quot;4.891666666666667in&quot; height=&quot;3.775in&quot;}</p><h2 id="pycharm给项目导入解释器" tabindex="-1"><a class="header-anchor" href="#pycharm给项目导入解释器" aria-hidden="true">#</a> pycharm给项目导入解释器</h2><p><img src="'+Xe+'" alt="">{width=&quot;5.753472222222222in&quot; height=&quot;1.3611111111111112in&quot;}<img src="'+Re+'" alt="">{width=&quot;5.758333333333334in&quot; height=&quot;3.511111111111111in&quot;}</p><h2 id="新建一个爬虫-scrapy-genspider-任务名-域名" tabindex="-1"><a class="header-anchor" href="#新建一个爬虫-scrapy-genspider-任务名-域名" aria-hidden="true">#</a> <strong>新建一个爬虫|scrapy genspider 任务名 域名</strong></h2><p><strong>进入到项目目录运行</strong></p><p><img src="'+Ce+'" alt="">{width=&quot;5.7625in&quot; height=&quot;0.7215277777777778in&quot;}</p><p>生成的文件</p><p><img src="'+Ve+'" alt="">{width=&quot;5.7652777777777775in&quot; height=&quot;2.6909722222222223in&quot;}</p><h2 id="命令行运行爬虫任务-scrapy-crawl-任务名" tabindex="-1"><a class="header-anchor" href="#命令行运行爬虫任务-scrapy-crawl-任务名" aria-hidden="true">#</a> <strong>命令行运行爬虫任务|scrapy crawl 任务名</strong></h2><p><img src="'+p+'" alt="">{width=&quot;5.7652777777777775in&quot; height=&quot;3.142361111111111in&quot;}</p><h2 id="禁止scrapy过滤不符合robot协议的url" tabindex="-1"><a class="header-anchor" href="#禁止scrapy过滤不符合robot协议的url" aria-hidden="true">#</a> <strong>禁止scrapy过滤不符合robot协议的url</strong></h2><p>不然爬虫很快就会停掉</p><p><img src="'+d+'" alt="">{width=&quot;5.767361111111111in&quot; height=&quot;4.519444444444445in&quot;}</p><h2 id="新建main-py调试运行爬虫任务" tabindex="-1"><a class="header-anchor" href="#新建main-py调试运行爬虫任务" aria-hidden="true">#</a> 新建main.py调试运行爬虫任务</h2><p>添加断点</p><p><img src="'+De+'" alt="">{width=&quot;5.7659722222222225in&quot; height=&quot;3.126388888888889in&quot;}</p><p>运行main.py</p><p><img src="'+Ee+'" alt="">{width=&quot;6.742361111111111in&quot; height=&quot;3.11875in&quot;}</p><p># -*- coding:utf-8 -*-</p><p>#@Time : 2020/4/3 15:11</p><p>#@Author : Gva</p><p>#@Web : anets.cn</p><p>import win_unicode_console</p><p>win_unicode_console.enable()</p><p>import os</p><p>import sys</p><p>from scrapy import cmdline</p><p>from utils.common import getMd5</p><p>import json</p><p>sys.path.append(os.path.dirname(os.path.abspath(__file__)))</p><p># print(&quot;哈哈&quot;)</p><p>print(os.path.dirname(os.path.abspath(__file__)))</p><p>cmdline.execute(&#39;scrapy crawl crawlOkzyw&#39;.split(&#39; &#39;))</p><p># dsn=[1,2,34]</p><p># json.dumps(dsn,ensure_ascii=False)</p><p># print(getMd5(&#39;&#39;))</p><h2 id="spider模块-爬取文章整体思路" tabindex="-1"><a class="header-anchor" href="#spider模块-爬取文章整体思路" aria-hidden="true">#</a> spider模块 ----爬取文章整体思路</h2><p><img src="'+Ue+'" alt="">{width=&quot;5.763194444444444in&quot; height=&quot;5.195138888888889in&quot;}</p><p>在parse方法里面</p><p>1要解析文章详情页列表所有url为detailUrls</p><p>2对detailUrls遍历，对于每个detailUrl，再调用详情页的解析函数</p><p>3提取下一页并交给scrapy进行下载，直到没有下一页</p><p><img src="'+Oe+'" alt="">{width=&quot;5.764583333333333in&quot; height=&quot;4.2659722222222225in&quot;}</p><h2 id="item模块-items-py-思路" tabindex="-1"><a class="header-anchor" href="#item模块-items-py-思路" aria-hidden="true">#</a> item模块--items.py ----思路</h2><p>item模块是实体pojo模块，在这里声明实体字段，然后在spider模块中被初始化</p><p>在pipeline模块中进行处理</p><h2 id="pipeline模块" tabindex="-1"><a class="header-anchor" href="#pipeline模块" aria-hidden="true">#</a> pipeline模块</h2><p>对item实体的处理，存储，下载等</p><h1 id="涉及深度优先的爬取思路" tabindex="-1"><a class="header-anchor" href="#涉及深度优先的爬取思路" aria-hidden="true">#</a> <strong>涉及深度优先的爬取思路</strong></h1><p>1首先提取处首页的所有url,过滤url为自己想要的urls</p><p>就</p><p>2遍历每个url,对每个url的内容进行爬取，解析，然后封装</p><p>yield scrapy.Request(url,callback=自定义的解析函数)</p><h1 id="request模拟session与cookie登陆" tabindex="-1"><a class="header-anchor" href="#request模拟session与cookie登陆" aria-hidden="true">#</a> request模拟session与cookie登陆</h1><h2 id="相关知识" tabindex="-1"><a class="header-anchor" href="#相关知识" aria-hidden="true">#</a> <strong>相关知识</strong></h2><h3 id="requests模块" tabindex="-1"><a class="header-anchor" href="#requests模块" aria-hidden="true">#</a> requests模块</h3>',129),Sa={href:"http://pypi.douban.com/simple",target:"_blank",rel:"noopener noreferrer"},Wa=a('<p>再导入：import requests</p><h4 id="获取session-session-requests-session" tabindex="-1"><a class="header-anchor" href="#获取session-session-requests-session" aria-hidden="true">#</a> <strong>获取session|session=requests.session()</strong></h4><h5 id="携带cookie访问" tabindex="-1"><a class="header-anchor" href="#携带cookie访问" aria-hidden="true">#</a> <strong>携带cookie访问</strong></h5><h6 id="指出cookie存储地址-session-cookies-cookielib-lwpcookiejar-filename-保存的cookie文件名" tabindex="-1"><a class="header-anchor" href="#指出cookie存储地址-session-cookies-cookielib-lwpcookiejar-filename-保存的cookie文件名" aria-hidden="true">#</a> 指出cookie存储地址| session.cookies = cookielib.LWPCookieJar(filename=&#39;保存的cookie文件名&#39;)</h6><h6 id="加载cookie-session-cookies-load-ignore-discard-true-ignore-expires-true" tabindex="-1"><a class="header-anchor" href="#加载cookie-session-cookies-load-ignore-discard-true-ignore-expires-true" aria-hidden="true">#</a> <strong>加载cookie|session.cookies.load(ignore_discard=True, ignore_expires=True)</strong></h6><h5 id="get请求-response-session-get-url-headers-请求头-allow-redirects-fasle" tabindex="-1"><a class="header-anchor" href="#get请求-response-session-get-url-headers-请求头-allow-redirects-fasle" aria-hidden="true">#</a> get请求|response=session.get(&quot;url&quot;，headers=请求头,allow_redirects=Fasle)</h5><h6 id="response-text-获取响应文本-1" tabindex="-1"><a class="header-anchor" href="#response-text-获取响应文本-1" aria-hidden="true">#</a> response.text |获取响应文本</h6><h6 id="response-status-code-获取响应状态码" tabindex="-1"><a class="header-anchor" href="#response-status-code-获取响应状态码" aria-hidden="true">#</a> <strong>response.status_code |获取响应状态码</strong></h6><h6 id="response-headers-获取响应头" tabindex="-1"><a class="header-anchor" href="#response-headers-获取响应头" aria-hidden="true">#</a> <strong>response.headers |获取响应头</strong></h6><h6 id="response-content-页面内容" tabindex="-1"><a class="header-anchor" href="#response-content-页面内容" aria-hidden="true">#</a> <strong>response.content |页面内容</strong></h6><h5 id="post请求-response-session-post-url-data-提交数据-headers-头信息" tabindex="-1"><a class="header-anchor" href="#post请求-response-session-post-url-data-提交数据-headers-头信息" aria-hidden="true">#</a> <strong>post请求|response=session.post(&quot;url&quot;,data=提交数据,headers=头信息)</strong></h5><h5 id="保存cookie" tabindex="-1"><a class="header-anchor" href="#保存cookie" aria-hidden="true">#</a> <strong>保存cookie</strong></h5><h6 id="导入cookielib模块" tabindex="-1"><a class="header-anchor" href="#导入cookielib模块" aria-hidden="true">#</a> 导入cookielib模块</h6><p>try:</p><p>import cookielib #python2</p><p>except :</p><p>import http.cookiejar as cookielib #python3环境</p><h6 id="session-cookies-cookielib-lwpcookiejar-filename-文件名-text" tabindex="-1"><a class="header-anchor" href="#session-cookies-cookielib-lwpcookiejar-filename-文件名-text" aria-hidden="true">#</a> <strong>session.cookies=cookielib.LWPCookieJar(filename=&quot;文件名.text&quot;)</strong></h6><h6 id="保存请求后存的cookie-session-cookies-save-参数" tabindex="-1"><a class="header-anchor" href="#保存请求后存的cookie-session-cookies-save-参数" aria-hidden="true">#</a> <strong>保存请求后存的cookie | session.cookies.save(参数)</strong></h6><p>有的网站不填参数获取不到cookie,此时添加上参数</p><p>session.cookies.save(ignore_expires=True, ignore_discard=True)</p><h5 id="保存页面" tabindex="-1"><a class="header-anchor" href="#保存页面" aria-hidden="true">#</a> <strong>保存页面</strong></h5><p>with open(&quot;renren1.html&quot;,&quot;w&quot;,encoding=&quot;utf-8&quot;) as f:</p><p>f.write(response.content.decode())</p><h2 id="步骤" tabindex="-1"><a class="header-anchor" href="#步骤" aria-hidden="true">#</a> 步骤</h2><h3 id="_1新建一个login-py" tabindex="-1"><a class="header-anchor" href="#_1新建一个login-py" aria-hidden="true">#</a> 1新建一个login.py</h3><p><img src="'+ze+'" alt="">{width=&quot;5.761805555555555in&quot; height=&quot;5.539583333333334in&quot;}</p><h1 id="scrapy模拟session与cookie登陆" tabindex="-1"><a class="header-anchor" href="#scrapy模拟session与cookie登陆" aria-hidden="true">#</a> <strong>scrapy模拟session与cookie登陆</strong></h1><h2 id="在项目的虚拟环境中生成一个spider" tabindex="-1"><a class="header-anchor" href="#在项目的虚拟环境中生成一个spider" aria-hidden="true">#</a> 在项目的虚拟环境中生成一个spider</h2><p>进入自己的项目目录，再进入虚拟环境</p><p>scrapy genspider 文件名 要爬的域名</p><h2 id="写splider" tabindex="-1"><a class="header-anchor" href="#写splider" aria-hidden="true">#</a> <strong>写splider</strong></h2><p><img src="'+Se+'" alt="">{width=&quot;5.7659722222222225in&quot; height=&quot;3.6145833333333335in&quot;}</p><h1 id="突破反爬虫" tabindex="-1"><a class="header-anchor" href="#突破反爬虫" aria-hidden="true">#</a> <strong>突破反爬虫</strong></h1><p><img src="'+We+'" alt="">{width=&quot;5.764583333333333in&quot; height=&quot;1.961111111111111in&quot;}<img src="'+Te+'" alt="">{width=&quot;5.766666666666667in&quot; height=&quot;2.825in&quot;}</p><p>爬虫与反爬虫对抗</p><p><img src="'+Je+'" alt="">{width=&quot;5.764583333333333in&quot; height=&quot;3.426388888888889in&quot;}</p><p>phantomjs是无界面浏览器</p><p>selenium可以操纵浏览器</p><h2 id="scrapy突破反爬虫限制" tabindex="-1"><a class="header-anchor" href="#scrapy突破反爬虫限制" aria-hidden="true">#</a> scrapy突破反爬虫限制</h2><p><img src="'+He+'" alt="">{width=&quot;5.7625in&quot; height=&quot;4.863888888888889in&quot;}<img src="'+Le+'" alt="">{width=&quot;5.759027777777778in&quot; height=&quot;3.798611111111111in&quot;}</p><h3 id="随机切换user-agent" tabindex="-1"><a class="header-anchor" href="#随机切换user-agent" aria-hidden="true">#</a> 随机切换user-agent</h3><p>反爬虫网站会对user-agent识别</p><p>User-Agent：代理，是一个特殊字符串，标识访问的浏览器信息</p><h4 id="普通的方式" tabindex="-1"><a class="header-anchor" href="#普通的方式" aria-hidden="true">#</a> 普通的方式</h4><p>就是在header里设置User-Agent一个固定值然后加到Request参数中</p><p><img src="'+Pe+'" alt="">{width=&quot;5.3in&quot; height=&quot;0.925in&quot;}</p><h4 id="改进的方式" tabindex="-1"><a class="header-anchor" href="#改进的方式" aria-hidden="true">#</a> 改进的方式：</h4><p>1将所有代理写到list中，这里2个为例子</p><p><img src="'+Qe+'" alt="">{width=&quot;5.558333333333334in&quot; height=&quot;0.825in&quot;}</p><p>2生成随机数，在list长度之间，根据随机数取</p><p><img src="'+Ze+'" alt="">{width=&quot;4.841666666666667in&quot; height=&quot;1.4583333333333333in&quot;}</p><h4 id="更高级的方式" tabindex="-1"><a class="header-anchor" href="#更高级的方式" aria-hidden="true">#</a> 更高级的方式：</h4><p>上面的切换每个爬虫都要写，这样耦合性高，为了松耦合：</p><p>spider到downloader中间需要经过middleware</p><p>所以可以在middleeware中添加头信息，这样就不用在多个spider中重复添加headers</p><h5 id="a在生成的middlewares-py中定义自己的useragent处理类-继承object即可" tabindex="-1"><a class="header-anchor" href="#a在生成的middlewares-py中定义自己的useragent处理类-继承object即可" aria-hidden="true">#</a> a在生成的middlewares.py中定义自己的UserAgent处理类，继承object即可</h5><p><img src="'+Be+'" alt="">{width=&quot;5.7652777777777775in&quot; height=&quot;4.1097222222222225in&quot;}</p><p>------以下是文字版</p><p>#导入前需要pip install fake-useragent   |</p><p>from fake_useragent import UserAgent</p><p>class  RandomUserAgentMiddleware(object):</p><p>#随机更换user-agent类</p><p># 构造函数接受传递过来的crawler</p><p>def __init__(self,crawler):</p><p>super(RandomUserAgentMiddleware,self).__init__()</p><p>#1从settings.py配置文件中取出代理集合</p><p># self.user_agent_list = crawler.settings.get(&quot;user_agent_list&quot;,[])</p><p>#2从github中维护的fake-useragent中取出代理集合,更多详细的设置自己可以去github搜</p><p>self.ua=UserAgent()</p><p></p><p>#重写from_crawler()函数，这个函数会传递crawl过来|@classmethod静态方法，python基础知识</p><p>@classmethod</p><p>def from_crawler(cls,crawler):</p><p># 为了将crawler传递给我们自定义的类</p><p>return cls(crawler)</p><p></p><p>#重写process_request,设置user-agent</p><p>def process_request(self,request,spider):</p><p>request.headers.setdefault(&quot;User-Agent&quot;,self.ua.random)</p><p>(补充，为了能够不重启spider就能动态切换，而且不用自己维护添加useragnt，需要安装使用fake-useragent)</p><h5 id="b在settings-py中配置" tabindex="-1"><a class="header-anchor" href="#b在settings-py中配置" aria-hidden="true">#</a> b在settings.py中配置：</h5><p><img src="'+Me+'" alt="">{width=&quot;5.763888888888889in&quot; height=&quot;0.9381944444444444in&quot;}</p><h3 id="代理ip的设置" tabindex="-1"><a class="header-anchor" href="#代理ip的设置" aria-hidden="true">#</a> <strong>代理ip的设置</strong></h3><p>当同一ip爬取过快的时候，很容易被服务器识别禁止</p><h4 id="代理ip原理" tabindex="-1"><a class="header-anchor" href="#代理ip原理" aria-hidden="true">#</a> 代理ip原理</h4><p><img src="'+Ge+'" alt="">{width=&quot;5.763194444444444in&quot; height=&quot;5.793055555555555in&quot;}</p><h4 id="代理ip实现" tabindex="-1"><a class="header-anchor" href="#代理ip实现" aria-hidden="true">#</a> <strong>代理ip实现</strong></h4><p>百度免费代理ip有免费的一些代理</p><p>其中高匿ip代理，代理服务器携带的请求不包含我们的ip，目标服务器无从知道本机ip</p><h5 id="简单的ip代理设置" tabindex="-1"><a class="header-anchor" href="#简单的ip代理设置" aria-hidden="true">#</a> 简单的ip代理设置</h5><p>在middleware.py中自定义middleware类，并在settingx.py中配置，上一级有说明</p><p><img src="'+Ne+'" alt="">{width=&quot;5.763194444444444in&quot; height=&quot;3.0236111111111112in&quot;}</p><h5 id="进阶的ip代理设置" tabindex="-1"><a class="header-anchor" href="#进阶的ip代理设置" aria-hidden="true">#</a> <strong>进阶的ip代理设置</strong></h5><p>1可以爬取网上的免费ip代理到数据库中</p><p>2然后从数据库中随机查</p><p>select ip,port from ip表 order by RAND() limit 1</p><p>3得到ip后判断ip是否可用(状态码200-300是ok的)，不可用从数据库删除</p><p>通过requests代理请求，请求出错，则无效，请求返回的状态码在200-300之外，也无效</p><p><img src="'+Ye+'" alt="">{width=&quot;4.916666666666667in&quot; height=&quot;0.6666666666666666in&quot;}<img src="'+Fe+'" alt="">{width=&quot;4.9875in&quot; height=&quot;3.3368055555555554in&quot;}</p><p><img src="'+Ke+'" alt="">{width=&quot;3.7916666666666665in&quot; height=&quot;1.1583333333333334in&quot;}</p><p>4通过上面的方法得到最终ip，进行简单的ip代理设置</p><h5 id="更多" tabindex="-1"><a class="header-anchor" href="#更多" aria-hidden="true">#</a> <strong>更多</strong></h5><p><strong>tor洋葱网络</strong></p><h3 id="验证码识别" tabindex="-1"><a class="header-anchor" href="#验证码识别" aria-hidden="true">#</a> <strong>验证码识别</strong></h3><h4 id="用户自己识别" tabindex="-1"><a class="header-anchor" href="#用户自己识别" aria-hidden="true">#</a> <strong>用户自己识别</strong></h4><h5 id="_1首先获取验证码url" tabindex="-1"><a class="header-anchor" href="#_1首先获取验证码url" aria-hidden="true">#</a> 1首先获取验证码url</h5><h5 id="_2下载图片" tabindex="-1"><a class="header-anchor" href="#_2下载图片" aria-hidden="true">#</a> 2下载图片</h5><h5 id="_3让程序打开图片" tabindex="-1"><a class="header-anchor" href="#_3让程序打开图片" aria-hidden="true">#</a> 3让程序打开图片</h5><p><img src="'+$e+'" alt="">{width=&quot;5.666666666666667in&quot; height=&quot;2.191666666666667in&quot;}</p><h5 id="_4用户识别图片的验证码输入" tabindex="-1"><a class="header-anchor" href="#_4用户识别图片的验证码输入" aria-hidden="true">#</a> 4用户识别图片的验证码输入</h5><p>关键代码：</p><p><img src="'+et+'" alt="">{width=&quot;5.763888888888889in&quot; height=&quot;0.5895833333333333in&quot;}</p><h5 id="_5将识别的验证码加入到form参数中一起提交" tabindex="-1"><a class="header-anchor" href="#_5将识别的验证码加入到form参数中一起提交" aria-hidden="true">#</a> 5将识别的验证码加入到form参数中一起提交</h5><h4 id="编码实现-tesseract-ocr识别工具" tabindex="-1"><a class="header-anchor" href="#编码实现-tesseract-ocr识别工具" aria-hidden="true">#</a> <strong>编码实现(tesseract-ocr识别工具)</strong></h4><p>识别率低</p><h4 id="在线打码-折中方式" tabindex="-1"><a class="header-anchor" href="#在线打码-折中方式" aria-hidden="true">#</a> <strong>在线打码--折中方式</strong></h4><p>云打码平台</p><p>去看视频把，暂时用不到</p><h4 id="人工打码-价格贵准确率高" tabindex="-1"><a class="header-anchor" href="#人工打码-价格贵准确率高" aria-hidden="true">#</a> <strong>人工打码--价格贵准确率高</strong></h4><h1 id="爬虫进阶" tabindex="-1"><a class="header-anchor" href="#爬虫进阶" aria-hidden="true">#</a> <strong>爬虫进阶</strong></h1><h2 id="selenium-浏览器自动测试框架-可以在window下用-动态网站抓取" tabindex="-1"><a class="header-anchor" href="#selenium-浏览器自动测试框架-可以在window下用-动态网站抓取" aria-hidden="true">#</a> selenium（浏览器自动测试框架，可以在window下用）-动态网站抓取</h2><p><img src="'+tt+'" alt="">{width=&quot;5.766666666666667in&quot; height=&quot;4.377777777777778in&quot;}</p><h3 id="在项目的虚拟环境安装" tabindex="-1"><a class="header-anchor" href="#在项目的虚拟环境安装" aria-hidden="true">#</a> 在项目的虚拟环境安装</h3><p>pip install selenium</p><h3 id="下载对应浏览器的driver" tabindex="-1"><a class="header-anchor" href="#下载对应浏览器的driver" aria-hidden="true">#</a> <strong>下载对应浏览器的driver</strong></h3><h3 id="selenimu入门案例" tabindex="-1"><a class="header-anchor" href="#selenimu入门案例" aria-hidden="true">#</a> <strong>selenimu入门案例</strong></h3><p><img src="'+at+'" alt="">{width=&quot;5.761805555555555in&quot; height=&quot;2.1930555555555555in&quot;}</p><h3 id="结合selenium的模拟登陆" tabindex="-1"><a class="header-anchor" href="#结合selenium的模拟登陆" aria-hidden="true">#</a> <strong>结合selenium的模拟登陆</strong></h3><p><img src="'+it+'" alt="">{width=&quot;5.767361111111111in&quot; height=&quot;1.6284722222222223in&quot;}</p><h3 id="selenimu模块" tabindex="-1"><a class="header-anchor" href="#selenimu模块" aria-hidden="true">#</a> <strong>selenimu模块</strong></h3><h4 id="webdriver模块" tabindex="-1"><a class="header-anchor" href="#webdriver模块" aria-hidden="true">#</a> webdriver模块</h4><p>from selenium import webdriver</p><h5 id="谷歌浏览器配置对象-chromeoptions" tabindex="-1"><a class="header-anchor" href="#谷歌浏览器配置对象-chromeoptions" aria-hidden="true">#</a> <strong>谷歌浏览器配置对象|c</strong>hromeOptions</h5><h6 id="对象获得-chromeoptions-wbdriver-chromeoptions" tabindex="-1"><a class="header-anchor" href="#对象获得-chromeoptions-wbdriver-chromeoptions" aria-hidden="true">#</a> 对象获得|<strong>c</strong>hromeOptions=wbdriver.ChromeOptions()</h6><h6 id="配置浏览器不加载突破提高访问速度" tabindex="-1"><a class="header-anchor" href="#配置浏览器不加载突破提高访问速度" aria-hidden="true">#</a> <strong>配置浏览器不加载突破提高访问速度</strong></h6><p><img src="'+st+'" alt="">{width=&quot;5.283333333333333in&quot; height=&quot;0.675in&quot;}</p><p>然后把配置对象作为参数传递给Chrome函数</p><h5 id="获取谷歌浏览器对象browser-webdriver-chrome-executable-path-浏览器驱动程序地址" tabindex="-1"><a class="header-anchor" href="#获取谷歌浏览器对象browser-webdriver-chrome-executable-path-浏览器驱动程序地址" aria-hidden="true">#</a> 获取谷歌浏览器对象browser=webdriver.Chrome(executable_path=&quot;浏览器驱动程序地址&quot;)</h5><p>其他参数:</p><p>chrome_options=配置对象</p><h6 id="访问-browser-get-url" tabindex="-1"><a class="header-anchor" href="#访问-browser-get-url" aria-hidden="true">#</a> 访问|browser.get(&quot;url&quot;)</h6><h6 id="获取访问后的html源码-browser-page-source" tabindex="-1"><a class="header-anchor" href="#获取访问后的html源码-browser-page-source" aria-hidden="true">#</a> <strong>获取访问后的html源码|browser.page_source</strong></h6><h6 id="通过browser本身获取元素-效率低-但互动操作必要-browser-find-element" tabindex="-1"><a class="header-anchor" href="#通过browser本身获取元素-效率低-但互动操作必要-browser-find-element" aria-hidden="true">#</a> <strong>通过browser本身获取元素(效率低，但互动操作必要)|browser.find_element_*(&quot;..&quot;)</strong></h6><p>获取元素之前，可能页面还没加载完，所以可以睡眠一会</p><p>import time</p><p>time.sleep(15)</p><p>####### <strong>获取元素后如果是输入框可以输入内容|.send_keys(&quot;输入的值&quot;)</strong></p><p>####### <strong>点击操作|.click()</strong></p><h6 id="将html源码交给scrapy的selector以便获取元素" tabindex="-1"><a class="header-anchor" href="#将html源码交给scrapy的selector以便获取元素" aria-hidden="true">#</a> <strong>将html源码交给scrapy的selector以便获取元素</strong></h6><p>####### Selector类 | 来自scrapy.selector</p><p>from scrapy.selector import Selector</p><p>获取select对象 | select=Select(text=browser.page_source)</p><p>css获取|selector.css(&quot;...&quot;)</p><h6 id="执行js脚本-browser-execute-script-js脚本" tabindex="-1"><a class="header-anchor" href="#执行js脚本-browser-execute-script-js脚本" aria-hidden="true">#</a> <strong>执行js脚本|browser.execute_script(&quot;js脚本&quot;)</strong></h6><p>例如，使鼠标下拉到底部</p><p>browser.execute_script(</p><p>&quot;</p><p>window.scrollTo(0,document.body.scrollHeight;</p><p>var lenOfPage=document.body.scrollHeight;</p><p>return lenOfPage;)</p><p>&quot;</p><p>)</p><h6 id="关闭窗口-browser-quit" tabindex="-1"><a class="header-anchor" href="#关闭窗口-browser-quit" aria-hidden="true">#</a> <strong>关闭窗口|browser.quit()</strong></h6><h2 id="phantomjs-无界面浏览器-可以在linux用-已淘汰" tabindex="-1"><a class="header-anchor" href="#phantomjs-无界面浏览器-可以在linux用-已淘汰" aria-hidden="true">#</a> <strong>phantomjs（无界面浏览器，可以在linux用）---已淘汰</strong></h2><p>多进程情况下phantomjs性能会下降严重</p><h3 id="官网下载phantomjs" tabindex="-1"><a class="header-anchor" href="#官网下载phantomjs" aria-hidden="true">#</a> 官网下载phantomjs</h3><p>然后将程序路径放到selenium中的Chrome(&quot;&quot;)中替代selenium driver就行了</p><h2 id="selenium集成scrapy" tabindex="-1"><a class="header-anchor" href="#selenium集成scrapy" aria-hidden="true">#</a> <strong>selenium集成scrapy</strong></h2><h3 id="在middlewares-py中自定义一个类并在settingx-py配置执行顺序" tabindex="-1"><a class="header-anchor" href="#在middlewares-py中自定义一个类并在settingx-py配置执行顺序" aria-hidden="true">#</a> 在middlewares.py中自定义一个类并在settingx.py配置执行顺序</h3><p>1思路，spider开始爬取后，中间会经过middlewares才进入downloader下载页面</p><p>所以在middlewares中对url进行拦截</p><p>2过滤出需要动态网页的url，或者需要交互的url</p><p>3拦截后，如果需要直接返回，而不用交给downloader下载的话，需要直接响应</p><p>from scrapy.http import HtmlResponse</p><p>然后在函数最后返回就好</p><p>return HtmlResponse(url=&quot;&quot;,body=,encoding=&quot;&quot;,request=)</p><p><img src="'+rt+'" alt="">{width=&quot;5.761805555555555in&quot; height=&quot;1.8451388888888889in&quot;}</p><p>4在settings.py中配置自定义的类</p><p>5对以上的优化，每次都要初始化窗口，这样废资源，但如果放到类中，随只初始化一次，但无法关闭，为了解决这个问题，需要把Chrome方法放到spider的初始化方法的属性中，并监听关闭信号</p><p><img src="'+nt+'" alt="">{width=&quot;5.766666666666667in&quot; height=&quot;3.2645833333333334in&quot;}</p><p>6scrapy本身是异步框架，但是这里同步了，会让性能降低，如果想改成异步，必须重写downloader，可以在github搜索downloader了解</p><h2 id="elasticsearch-企业级搜索引擎" tabindex="-1"><a class="header-anchor" href="#elasticsearch-企业级搜索引擎" aria-hidden="true">#</a> <strong>elasticsearch--企业级搜索引擎</strong></h2><p>基于lucene,基于Restful接口，分布式多用户能力的搜索引擎</p><p>此外还有solr ， elk(日志分析系统)</p><p>爬虫后完成搜索功能</p><p>场景</p><p><img src="'+ot+'" alt="">{width=&quot;5.763888888888889in&quot; height=&quot;2.466666666666667in&quot;}</p><h3 id="关系数据库缺点" tabindex="-1"><a class="header-anchor" href="#关系数据库缺点" aria-hidden="true">#</a> 关系数据库缺点</h3><p>无法打分</p><p>无分布式</p><p>无法解析搜索请求</p><p>效率低</p><p>分词</p><h3 id="非关系数据库" tabindex="-1"><a class="header-anchor" href="#非关系数据库" aria-hidden="true">#</a> <strong>非关系数据库</strong></h3><p><strong>redis mongodb</strong></p><h3 id="安装" tabindex="-1"><a class="header-anchor" href="#安装" aria-hidden="true">#</a> <strong>安装</strong></h3><h4 id="首先安装java" tabindex="-1"><a class="header-anchor" href="#首先安装java" aria-hidden="true">#</a> 首先安装java</h4><p>并查看版本java -version，要在1.8上</p><h4 id="去github下载elasticsearch-rtf中文插件版" tabindex="-1"><a class="header-anchor" href="#去github下载elasticsearch-rtf中文插件版" aria-hidden="true">#</a> <strong>去github下载elasticsearch-rtf中文插件版</strong></h4><p><strong>下载后</strong></p><p><img src="'+ht+'" alt="">{width=&quot;5.7652777777777775in&quot; height=&quot;2.5034722222222223in&quot;}</p><h4 id="启动-直接命令窗口运行bin目录下的bat文件" tabindex="-1"><a class="header-anchor" href="#启动-直接命令窗口运行bin目录下的bat文件" aria-hidden="true">#</a> <strong>启动，直接命令窗口运行bin目录下的bat文件</strong></h4><h4 id="浏览器访问-ip地址-9200" tabindex="-1"><a class="header-anchor" href="#浏览器访问-ip地址-9200" aria-hidden="true">#</a> <strong>浏览器访问|ip地址:9200</strong></h4><h4 id="head插件下载安装" tabindex="-1"><a class="header-anchor" href="#head插件下载安装" aria-hidden="true">#</a> <strong>head插件下载安装</strong></h4><p>elasticsearch-head插件--连接数据库</p><p>在github下载</p><h5 id="npm安装依赖" tabindex="-1"><a class="header-anchor" href="#npm安装依赖" aria-hidden="true">#</a> npm安装依赖</h5><p>安装如果慢,可以使用npm加速版cnpm</p><p>npm install -g cnpm --registry = https://registry.npm.taobao.org</p><p>进入你下载的elasticsearch-head目录</p><p>1安装依赖</p><p>cnpm install</p><p>2启动</p><p>cnpm run start</p><p>3访问</p><p>ip:9100</p><p>连接之后会自动连接ip地址:9200，也就是elasticsearch，如果连接不上集群</p><p>这是因为elasticsearch不允许第三方服务连接</p><p>为了能够访问，需要在elasticsearch进行一些配置</p><p>elasticsearch.yml文件配置以下信息</p><p><img src="'+pt+'" alt="">{width=&quot;5.763888888888889in&quot; height=&quot;0.6736111111111112in&quot;}</p><h4 id="kibana安装" tabindex="-1"><a class="header-anchor" href="#kibana安装" aria-hidden="true">#</a> <strong>kibana安装</strong></h4><p>百度官网下载</p><p>下载后运行</p><p>bat文件</p><p>然后访问 ip:5601端口</p><p><img src="'+dt+'" alt="">{width=&quot;5.768055555555556in&quot; height=&quot;2.70625in&quot;}</p><h3 id="概念" tabindex="-1"><a class="header-anchor" href="#概念" aria-hidden="true">#</a> <strong>概念</strong></h3><h4 id="认知" tabindex="-1"><a class="header-anchor" href="#认知" aria-hidden="true">#</a> 认知</h4><p><img src="'+ct+'" alt="">{width=&quot;5.767361111111111in&quot; height=&quot;1.898611111111111in&quot;}<img src="'+ut+'" alt="">{width=&quot;5.763194444444444in&quot; height=&quot;2.0381944444444446in&quot;}<img src="'+gt+'" alt="">{width=&quot;5.763888888888889in&quot; height=&quot;2.6131944444444444in&quot;}</p><h4 id="倒排索引" tabindex="-1"><a class="header-anchor" href="#倒排索引" aria-hidden="true">#</a> 倒排索引</h4><p><img src="'+lt+'" alt="">{width=&quot;5.766666666666667in&quot; height=&quot;2.386111111111111in&quot;}</p><p>倒排索引，存文件的时候对内容进行分析，分词，把词出现的文档列出来</p><p><img src="'+qt+'" alt="">{width=&quot;5.7652777777777775in&quot; height=&quot;2.595833333333333in&quot;}</p><p><img src="'+mt+'" alt="">{width=&quot;5.125in&quot; height=&quot;2.2416666666666667in&quot;}</p><h3 id="基本使用" tabindex="-1"><a class="header-anchor" href="#基本使用" aria-hidden="true">#</a> <strong>基本使用</strong></h3><h4 id="kibana的命令操作" tabindex="-1"><a class="header-anchor" href="#kibana的命令操作" aria-hidden="true">#</a> <strong>kibana的命令操作</strong></h4><h5 id="索引的创建" tabindex="-1"><a class="header-anchor" href="#索引的创建" aria-hidden="true">#</a> 索引的创建</h5><p><img src="'+bt+'" alt="">{width=&quot;5.763888888888889in&quot; height=&quot;2.1798611111111112in&quot;}</p><p>索引创建后不能修改分片数量，分片数量默认5</p><h5 id="查询索引信息" tabindex="-1"><a class="header-anchor" href="#查询索引信息" aria-hidden="true">#</a> <strong>查询索引信息</strong></h5><p>get 名</p><h6 id="查询索引设置信息" tabindex="-1"><a class="header-anchor" href="#查询索引设置信息" aria-hidden="true">#</a> 查询索引设置信息</h6><p><strong>get 名/_settings</strong></p><p><img src="'+ft+'" alt="">{width=&quot;5.761805555555555in&quot; height=&quot;2.34375in&quot;}</p><p>4种方式</p><p><img src="'+xt+'" alt="">{width=&quot;4.033333333333333in&quot; height=&quot;1.0833333333333333in&quot;}</p><h6 id="查询字段" tabindex="-1"><a class="header-anchor" href="#查询字段" aria-hidden="true">#</a> <strong>查询字段</strong></h6><p><strong>get 索引库/表/id？_source=字段1,字段2</strong></p><p><strong>get 索引库/表/id？_source 获取所有</strong></p><h5 id="更新索引信息" tabindex="-1"><a class="header-anchor" href="#更新索引信息" aria-hidden="true">#</a> <strong>更新索引信息</strong></h5><p>不能改分片数</p><p>put 名/_settings{</p><p>&quot;number_of_replicas&quot;:2</p><p>}</p><h5 id="保存文档到索引库" tabindex="-1"><a class="header-anchor" href="#保存文档到索引库" aria-hidden="true">#</a> <strong>保存文档到索引库</strong></h5><p>put 索引库名/type（表名）/id(可以不写，自动生成){</p><p>&quot;字段1&quot;:值</p><p>}</p><p><img src="'+wt+'" alt="">{width=&quot;3.3666666666666667in&quot; height=&quot;1.9in&quot;}</p><p>head插件就会显示</p><p><img src="'+At+'" alt="">{width=&quot;5.641666666666667in&quot; height=&quot;0.5666666666666667in&quot;}</p><h5 id="修改索引库" tabindex="-1"><a class="header-anchor" href="#修改索引库" aria-hidden="true">#</a> <strong>修改索引库</strong></h5><p>1全部覆盖</p><p>put 索引库名/type（表名）/id{</p><p>&quot;字段1&quot;:值</p><p>}</p><p>2修改某字段</p><p>post 库名/表名/id/_update{</p><p>&quot;doc&quot;:{</p><p>&quot;字段&quot;:值</p><p>}</p><p>}</p><h5 id="删除" tabindex="-1"><a class="header-anchor" href="#删除" aria-hidden="true">#</a> <strong>删除</strong></h5><h6 id="删除文档" tabindex="-1"><a class="header-anchor" href="#删除文档" aria-hidden="true">#</a> <strong>删除文档</strong></h6><p>delete 库/表/id</p><h6 id="删除type-表" tabindex="-1"><a class="header-anchor" href="#删除type-表" aria-hidden="true">#</a> <strong>删除type(表)</strong></h6><p>delete 库/表</p><h6 id="删除库" tabindex="-1"><a class="header-anchor" href="#删除库" aria-hidden="true">#</a> 删除库</h6><p>delete 库</p><h5 id="批量操作" tabindex="-1"><a class="header-anchor" href="#批量操作" aria-hidden="true">#</a> <strong>批量操作</strong></h5><p><img src="'+yt+'" alt="">{width=&quot;5.759722222222222in&quot; height=&quot;2.93125in&quot;} <img src="'+_t+'" alt="">{width=&quot;3.658333333333333in&quot; height=&quot;2.1333333333333333in&quot;}</p><h4 id="映射" tabindex="-1"><a class="header-anchor" href="#映射" aria-hidden="true">#</a> <strong>映射</strong></h4><p><img src="'+vt+'" alt="">{width=&quot;5.756944444444445in&quot; height=&quot;1.8159722222222223in&quot;}</p><h5 id="内置类型" tabindex="-1"><a class="header-anchor" href="#内置类型" aria-hidden="true">#</a> 内置类型</h5><p><img src="'+kt+'" alt="">{width=&quot;5.761805555555555in&quot; height=&quot;3.8986111111111112in&quot;}</p><h6 id="内置类型属性" tabindex="-1"><a class="header-anchor" href="#内置类型属性" aria-hidden="true">#</a> 内置类型属性</h6><p><img src="'+It+'" alt="">{width=&quot;5.757638888888889in&quot; height=&quot;3.0875in&quot;}</p><h3 id="查询" tabindex="-1"><a class="header-anchor" href="#查询" aria-hidden="true">#</a> <strong>查询</strong></h3><h4 id="准备数据" tabindex="-1"><a class="header-anchor" href="#准备数据" aria-hidden="true">#</a> <strong>准备数据</strong></h4><h5 id="添加映射" tabindex="-1"><a class="header-anchor" href="#添加映射" aria-hidden="true">#</a> 添加映射</h5><p>注意，title字段分词了</p><p><img src="'+jt+'" alt="">{width=&quot;5.766666666666667in&quot; height=&quot;5.605555555555555in&quot;}<img src="'+Xt+'" alt="">{width=&quot;5.5in&quot; height=&quot;0.7583333333333333in&quot;}</p><h5 id="添加数据" tabindex="-1"><a class="header-anchor" href="#添加数据" aria-hidden="true">#</a> <strong>添加数据</strong></h5><p><img src="'+Rt+'" alt="">{width=&quot;5.763888888888889in&quot; height=&quot;3.55625in&quot;}</p><h4 id="match查询-自动分词or查询" tabindex="-1"><a class="header-anchor" href="#match查询-自动分词or查询" aria-hidden="true">#</a> <strong>match查询--自动分词or查询</strong></h4><p>get 库/_search</p><p>{</p><p>&quot;query&quot;:{</p><p>&quot;match&quot;:{</p><p>&quot;字段&quot;:值</p><p>}</p><p>}</p><p>}</p><p><img src="'+Ct+'" alt="">{width=&quot;3.525in&quot; height=&quot;1.8833333333333333in&quot;}</p><h4 id="term查询-不对查询条件分词" tabindex="-1"><a class="header-anchor" href="#term查询-不对查询条件分词" aria-hidden="true">#</a> <strong>term查询----不对查询条件分词</strong></h4><p>get 库/_search</p><p>{</p><p>&quot;query&quot;:{</p><p>&quot;term&quot;:{</p><p>&quot;字段&quot;:值</p><p>}</p><p>}</p><p>}</p><p><img src="'+Vt+'" alt="">{width=&quot;5.408333333333333in&quot; height=&quot;2.1416666666666666in&quot;}</p><h4 id="terms查询" tabindex="-1"><a class="header-anchor" href="#terms查询" aria-hidden="true">#</a> <strong>terms查询</strong></h4><p>get 库/_search</p><p>{</p><p>&quot;query&quot;:{</p><p>&quot;terms&quot;:{</p><p>&quot;字段&quot;:[值1,值2]</p><p>}</p><p>}</p><p>}</p><p><img src="'+Dt+'" alt="">{width=&quot;2.9833333333333334in&quot; height=&quot;1.075in&quot;}</p><h4 id="分页" tabindex="-1"><a class="header-anchor" href="#分页" aria-hidden="true">#</a> <strong>分页</strong></h4><p><img src="'+Et+'" alt="">{width=&quot;2.125in&quot; height=&quot;1.6666666666666667in&quot;}</p><h4 id="match-all查询-查询所有" tabindex="-1"><a class="header-anchor" href="#match-all查询-查询所有" aria-hidden="true">#</a> <strong>match_all查询--查询所有</strong></h4><p><img src="'+Ut+'" alt="">{width=&quot;1.8333333333333333in&quot; height=&quot;1.075in&quot;}</p><h4 id="match-phrase查询-短语查询-自动分词and查询" tabindex="-1"><a class="header-anchor" href="#match-phrase查询-短语查询-自动分词and查询" aria-hidden="true">#</a> <strong>match_phrase查询(短语查询)-自动分词and查询</strong></h4><p>将条件分词，分成一个数组，与match不同的是</p><p>所查字段的值必须包含所有分词后的字段</p><p>比如</p><p>查询python系统 ，分词后[python,系统]</p><p>那么所返回的内容必须包含python与系统</p><p>slop还可以指定2个词隔开的最大距离</p><p><img src="'+Ot+'" alt="">{width=&quot;2.933333333333333in&quot; height=&quot;1.8083333333333333in&quot;}</p><h4 id="multi-match查询" tabindex="-1"><a class="header-anchor" href="#multi-match查询" aria-hidden="true">#</a> <strong>multi_match查询</strong></h4><p>可以指定多个字段</p><p><img src="'+zt+'" alt="">{width=&quot;3.2666666666666666in&quot; height=&quot;2.0166666666666666in&quot;}</p><p>更改权重</p><p><img src="'+St+'" alt="">{width=&quot;3.35in&quot; height=&quot;1.3416666666666666in&quot;}</p><h4 id="查询指定返回的字段" tabindex="-1"><a class="header-anchor" href="#查询指定返回的字段" aria-hidden="true">#</a> <strong>查询指定返回的字段</strong></h4><p>只能返回store定义时设置为true的字段</p><p><img src="'+Wt+'" alt="">{width=&quot;5.764583333333333in&quot; height=&quot;2.238888888888889in&quot;}</p><h4 id="排序" tabindex="-1"><a class="header-anchor" href="#排序" aria-hidden="true">#</a> <strong>排序</strong></h4><p><img src="'+Tt+'" alt="">{width=&quot;4.75in&quot; height=&quot;3.4in&quot;}</p><h4 id="范围查询range" tabindex="-1"><a class="header-anchor" href="#范围查询range" aria-hidden="true">#</a> <strong>范围查询range</strong></h4><p><strong>lte &lt;=</strong></p><p><strong>gte &lt;=</strong></p><p><strong>lt &lt;</strong></p><p><strong>boost 权重</strong></p><p><img src="'+Jt+'" alt="">{width=&quot;4.916666666666667in&quot; height=&quot;3.025in&quot;}</p><h4 id="模糊查询wildcard" tabindex="-1"><a class="header-anchor" href="#模糊查询wildcard" aria-hidden="true">#</a> <strong>模糊查询wildcard</strong></h4><p><strong>*代表任意值</strong></p><p><img src="'+Ht+'" alt="">{width=&quot;5.763888888888889in&quot; height=&quot;1.9527777777777777in&quot;}</p><h4 id="bool查询-filter查询过时" tabindex="-1"><a class="header-anchor" href="#bool查询-filter查询过时" aria-hidden="true">#</a> <strong>bool查询（filter查询过时）</strong></h4><p><img src="'+Lt+'" alt="">{width=&quot;1.675in&quot; height=&quot;0.9083333333333333in&quot;}</p><h5 id="建立测试数据" tabindex="-1"><a class="header-anchor" href="#建立测试数据" aria-hidden="true">#</a> 建立测试数据</h5><p><img src="'+Pt+'" alt="">{width=&quot;2.7333333333333334in&quot; height=&quot;1.4in&quot;}</p><h5 id="组合过滤查询" tabindex="-1"><a class="header-anchor" href="#组合过滤查询" aria-hidden="true">#</a> 组合过滤查询</h5><p>filter对字段过滤，不参与打分</p><p>must 中数组里面所有查询都必须满足</p><p>should数组里条件只要满足一个或者多个</p><p>must_not</p><p><img src="'+Qt+'" alt="">{width=&quot;4.416666666666667in&quot; height=&quot;3.658333333333333in&quot;}<img src="'+Zt+'" alt="">{width=&quot;3.5833333333333335in&quot; height=&quot;2.475in&quot;}</p><h5 id="嵌套查询" tabindex="-1"><a class="header-anchor" href="#嵌套查询" aria-hidden="true">#</a> <strong>嵌套查询</strong></h5><p><img src="'+Bt+'" alt="">{width=&quot;3.2583333333333333in&quot; height=&quot;0.48333333333333334in&quot;}</p><p><img src="'+Mt+'" alt="">{width=&quot;3.591666666666667in&quot; height=&quot;3.033333333333333in&quot;}</p><h4 id="查看分析器解析的结果" tabindex="-1"><a class="header-anchor" href="#查看分析器解析的结果" aria-hidden="true">#</a> <strong>查看分析器解析的结果</strong></h4><p><img src="'+Gt+'" alt="">{width=&quot;2.9166666666666665in&quot; height=&quot;1.0583333333333333in&quot;}</p><h4 id="过滤空与非空" tabindex="-1"><a class="header-anchor" href="#过滤空与非空" aria-hidden="true">#</a> <strong>过滤空与非空</strong></h4><h5 id="建立测试数据-1" tabindex="-1"><a class="header-anchor" href="#建立测试数据-1" aria-hidden="true">#</a> 建立测试数据</h5><p><img src="'+Nt+'" alt="">{width=&quot;3.05in&quot; height=&quot;1.7916666666666667in&quot;}</p><h5 id="通过存在与不存在" tabindex="-1"><a class="header-anchor" href="#通过存在与不存在" aria-hidden="true">#</a> <strong>通过存在与不存在</strong></h5><p><img src="'+Yt+'" alt="">{width=&quot;3.575in&quot; height=&quot;2.1166666666666667in&quot;}<img src="'+Ft+'" alt="">{width=&quot;3.4in&quot; height=&quot;1.7583333333333333in&quot;}</p><h2 id="elasticsearch-scrapy-可以用java代替哈" tabindex="-1"><a class="header-anchor" href="#elasticsearch-scrapy-可以用java代替哈" aria-hidden="true">#</a> <strong>elasticsearch+scrapy----（可以用java代替哈）</strong></h2><h3 id="将爬取的数据放入elasticsearch中" tabindex="-1"><a class="header-anchor" href="#将爬取的数据放入elasticsearch中" aria-hidden="true">#</a> 将爬取的数据放入elasticsearch中</h3><p>在pipeline中将数据写入索引库</p><h4 id="安装elasticsearch-py接口包" tabindex="-1"><a class="header-anchor" href="#安装elasticsearch-py接口包" aria-hidden="true">#</a> 安装elasticsearch-py接口包</h4><p>在项目的虚拟环境中</p><p>pip install elasticsearch-dsl</p><h4 id="根据-elasticsearch-dsl官方模板建model" tabindex="-1"><a class="header-anchor" href="#根据-elasticsearch-dsl官方模板建model" aria-hidden="true">#</a> <strong>根据 elasticsearch-dsl官方模板建model</strong></h4><p>官网：</p><p><img src="'+Kt+'" alt="">{width=&quot;5.761805555555555in&quot; height=&quot;3.0215277777777776in&quot;}</p><p>在自己的model.py里</p><p><img src="'+$t+'" alt="">{width=&quot;5.541666666666667in&quot; height=&quot;1.1083333333333334in&quot;}<img src="'+ea+'" alt="">{width=&quot;3.55in&quot; height=&quot;3.425in&quot;}</p><h4 id="运行这个文件就会建立索引库" tabindex="-1"><a class="header-anchor" href="#运行这个文件就会建立索引库" aria-hidden="true">#</a> <strong>运行这个文件就会建立索引库</strong></h4><h2 id="其余动态网页获取介绍" tabindex="-1"><a class="header-anchor" href="#其余动态网页获取介绍" aria-hidden="true">#</a> <strong>其余动态网页获取介绍</strong></h2><h3 id="phantomjs无界面已经过时的替代方案1-linux下" tabindex="-1"><a class="header-anchor" href="#phantomjs无界面已经过时的替代方案1-linux下" aria-hidden="true">#</a> phantomjs无界面已经过时的替代方案1（linux下）</h3><p>对于chrome有界面的浏览器，python提供了无界面的环境</p><p>如果要在无界面的环境下运行chrome(linux才行)</p><p>需要</p><p>在项目虚拟环境安装</p><p>pip install pyvirtualdisplay</p><p>导入</p><p>from pyvirtualdisplay import Display</p><p>display=Display(visible=0,size=(800,600)) #0是不显示</p><p>display.start()</p><p>#后面的操作和前面一样</p><p>browser = webdriver.Chrome(..)</p><p>.........</p><h2 id="scrapy的暂停与重启" tabindex="-1"><a class="header-anchor" href="#scrapy的暂停与重启" aria-hidden="true">#</a> <strong>scrapy的暂停与重启</strong></h2><p>1要做到暂停爬虫，需要在开始爬虫spider时指定保存路径(不同spider不能共用同一目录)</p><p>crawl spider spider名 -s JOBDIR=保存的相对路径</p><p>2暂停是ctrl+c （按2次就是退出，只能按一次）</p><p>3重启：和开始爬虫一样的命令</p><p>crawl spider spider名 -s JOBDIR=保存的相对路径</p><h2 id="其他不重要的" tabindex="-1"><a class="header-anchor" href="#其他不重要的" aria-hidden="true">#</a> <strong>其他不重要的</strong></h2><h3 id="scrapy-url去重原理" tabindex="-1"><a class="header-anchor" href="#scrapy-url去重原理" aria-hidden="true">#</a> <strong>scrapy url去重原理</strong></h3><p>了解就行，需要重写</p><p><img src="'+ta+'" alt="">{width=&quot;5.761805555555555in&quot; height=&quot;2.60625in&quot;}</p><h3 id="scrapy-telnet-远程连接端口操作" tabindex="-1"><a class="header-anchor" href="#scrapy-telnet-远程连接端口操作" aria-hidden="true">#</a> <strong>scrapy telnet---远程连接端口操作</strong></h3><p><img src="'+aa+'" alt="">{width=&quot;5.766666666666667in&quot; height=&quot;0.74375in&quot;}</p><p>1window需要打开自己talent服务</p><p><img src="'+ia+'" alt="">{width=&quot;5.761805555555555in&quot; height=&quot;3.6729166666666666in&quot;}</p><p>2本地：</p><p>运行telnet ip 端口</p><p>---连接上你的spider服务器</p><p>使用est()命令查看spideer状态</p><p>具体参数使用见官网</p><h3 id="spider与middleware详解" tabindex="-1"><a class="header-anchor" href="#spider与middleware详解" aria-hidden="true">#</a> <strong>spider与middleware详解</strong></h3><p><strong>见视频</strong></p><h3 id="spider数据收集-存取一些spider信息" tabindex="-1"><a class="header-anchor" href="#spider数据收集-存取一些spider信息" aria-hidden="true">#</a> <strong>spider数据收集--存取一些spider信息</strong></h3><p>有插件来取收集的数据</p><p><img src="'+sa+'" alt="">{width=&quot;5.558333333333334in&quot; height=&quot;2.85in&quot;}</p><h4 id="实现失败url统计" tabindex="-1"><a class="header-anchor" href="#实现失败url统计" aria-hidden="true">#</a> 实现失败url统计</h4><p><img src="'+ra+'" alt="">{width=&quot;5.475in&quot; height=&quot;1.7in&quot;}</p><h4 id="其他使用" tabindex="-1"><a class="header-anchor" href="#其他使用" aria-hidden="true">#</a> <strong>其他使用</strong></h4><p><img src="'+na+'" alt="">{width=&quot;5.558333333333334in&quot; height=&quot;0.275in&quot;}</p><h3 id="scrapy信号" tabindex="-1"><a class="header-anchor" href="#scrapy信号" aria-hidden="true">#</a> <strong>scrapy信号</strong></h3><p><img src="'+oa+'" alt="">{width=&quot;5.767361111111111in&quot; height=&quot;1.479861111111111in&quot;}</p><h4 id="使用" tabindex="-1"><a class="header-anchor" href="#使用" aria-hidden="true">#</a> 使用</h4><p><img src="'+ha+'" alt="">{width=&quot;5.7659722222222225in&quot; height=&quot;1.4208333333333334in&quot;}</p><h3 id="scapy扩展开发" tabindex="-1"><a class="header-anchor" href="#scapy扩展开发" aria-hidden="true">#</a> <strong>scapy扩展开发</strong></h3><p><strong>自己去官网看</strong></p><h1 id="分布式爬虫scapy-redis" tabindex="-1"><a class="header-anchor" href="#分布式爬虫scapy-redis" aria-hidden="true">#</a> <strong>分布式爬虫scapy-redis</strong></h1><h2 id="分布式爬虫要点" tabindex="-1"><a class="header-anchor" href="#分布式爬虫要点" aria-hidden="true">#</a> 分布式爬虫要点</h2><p><img src="'+pa+'" alt="">{width=&quot;5.208333333333333in&quot; height=&quot;3.183333333333333in&quot;}</p><p>好处：充分利用机器带宽加速爬取</p><p><img src="'+da+'" alt="">{width=&quot;5.764583333333333in&quot; height=&quot;1.7958333333333334in&quot;}</p><h2 id="redis命令" tabindex="-1"><a class="header-anchor" href="#redis命令" aria-hidden="true">#</a> <strong>redis命令</strong></h2><h3 id="列表命令" tabindex="-1"><a class="header-anchor" href="#列表命令" aria-hidden="true">#</a> <strong>列表命令</strong></h3><p><img src="'+ca+'" alt="">{width=&quot;3.8in&quot; height=&quot;2.625in&quot;}</p><h3 id="集合命令" tabindex="-1"><a class="header-anchor" href="#集合命令" aria-hidden="true">#</a> <strong>集合命令</strong></h3><p><img src="'+ua+'" alt="">{width=&quot;3.283333333333333in&quot; height=&quot;2.466666666666667in&quot;}<img src="'+ga+'" alt="">{width=&quot;2.7333333333333334in&quot; height=&quot;1.65in&quot;}<img src="'+la+'" alt="">{width=&quot;5.691666666666666in&quot; height=&quot;3.183333333333333in&quot;}</p><h2 id="项目开发" tabindex="-1"><a class="header-anchor" href="#项目开发" aria-hidden="true">#</a> <strong>项目开发</strong></h2><h3 id="在项目虚拟环境中安装redis" tabindex="-1"><a class="header-anchor" href="#在项目虚拟环境中安装redis" aria-hidden="true">#</a> 在项目虚拟环境中安装redis</h3><p>pip install redis</p><h3 id="新建项目-scrapy-startproject-项目名" tabindex="-1"><a class="header-anchor" href="#新建项目-scrapy-startproject-项目名" aria-hidden="true">#</a> <strong>新建项目|scrapy startproject 项目名</strong></h3><h3 id="在github下载scrapy-redis并拷贝到项目" tabindex="-1"><a class="header-anchor" href="#在github下载scrapy-redis并拷贝到项目" aria-hidden="true">#</a> <strong>在github下载scrapy-redis并拷贝到项目</strong></h3><p>将下载后的目录拷贝到项目中</p><p>基于这个模板写自己的业务</p><h3 id="新建spider继承redisspider" tabindex="-1"><a class="header-anchor" href="#新建spider继承redisspider" aria-hidden="true">#</a> <strong>新建spider继承RedisSpider</strong></h3><h3 id="逻辑上的修改" tabindex="-1"><a class="header-anchor" href="#逻辑上的修改" aria-hidden="true">#</a> <strong>逻辑上的修改</strong></h3><h4 id="settings-py配置" tabindex="-1"><a class="header-anchor" href="#settings-py配置" aria-hidden="true">#</a> settings.py配置</h4><p><img src="'+qa+'" alt="">{width=&quot;5.675in&quot; height=&quot;2.525in&quot;}</p><h4 id="strat-url" tabindex="-1"><a class="header-anchor" href="#strat-url" aria-hidden="true">#</a> <strong>strat_url</strong></h4><p><img src="'+ma+'" alt="">{width=&quot;5.768055555555556in&quot; height=&quot;1.3041666666666667in&quot;}</p><p>redis存初始url</p><p><img src="'+ba+'" alt="">{width=&quot;5.75in&quot; height=&quot;0.35833333333333334in&quot;}</p><h3 id="分布式思路" tabindex="-1"><a class="header-anchor" href="#分布式思路" aria-hidden="true">#</a> <strong>分布式思路</strong></h3><p>scrapy-redis当经过schedual时会自动将请求压入到redis中，底层帮你完成这些</p><h1 id="通用-常用-库-通用知识-通用模块" tabindex="-1"><a class="header-anchor" href="#通用-常用-库-通用知识-通用模块" aria-hidden="true">#</a> <strong>通用(常用)库|通用知识|通用模块</strong></h1><h3 id="time对象-时间" tabindex="-1"><a class="header-anchor" href="#time对象-时间" aria-hidden="true">#</a> <strong>time对象|时间</strong></h3><h4 id="time-sleep-10-让程序睡一会-暂停执行" tabindex="-1"><a class="header-anchor" href="#time-sleep-10-让程序睡一会-暂停执行" aria-hidden="true">#</a> time.sleep(10)|让程序睡一会，暂停执行</h4><h3 id="url相关urllib库" tabindex="-1"><a class="header-anchor" href="#url相关urllib库" aria-hidden="true">#</a> Url相关urllib库</h3><h4 id="parse模块" tabindex="-1"><a class="header-anchor" href="#parse模块" aria-hidden="true">#</a> <strong>parse模块</strong></h4><p>from urllib import parse</p><h5 id="parse-urljoin-url1-url2" tabindex="-1"><a class="header-anchor" href="#parse-urljoin-url1-url2" aria-hidden="true">#</a> parse.urljoin(url1,url2)</h5><p>把url1的主域名解析出来拼接上url2（这个url可以没有域名）的参数 变成一个新的url</p><p>例如</p><p>parse.urljoin(&quot;http://anets.cn/share&quot;,&quot;http://anets.cn/list&quot;)</p><p>变成http://anets.cn/list</p><p>parse.urljoin(&quot;http://anets.cn/share&quot;,&quot;list&quot;)</p><p>变成http://anets.cn/list</p><h3 id="os-路径相关" tabindex="-1"><a class="header-anchor" href="#os-路径相关" aria-hidden="true">#</a> <strong>Os -路径相关</strong></h3><p><strong>import os</strong></p><h4 id="获取当前文件所在的目录名称" tabindex="-1"><a class="header-anchor" href="#获取当前文件所在的目录名称" aria-hidden="true">#</a> 获取当前文件所在的目录名称</h4><p>os.path.dirname(__file__)</p><h4 id="获取文件和目录的绝对路径" tabindex="-1"><a class="header-anchor" href="#获取文件和目录的绝对路径" aria-hidden="true">#</a> <strong>获取文件和目录的绝对路径</strong></h4><p>os.path.abspath(目录/文件)</p><h4 id="获取项目的绝对路径一般用法" tabindex="-1"><a class="header-anchor" href="#获取项目的绝对路径一般用法" aria-hidden="true">#</a> <strong>获取项目的绝对路径一般用法</strong></h4><p><strong>os.path.abspath(os.path.dirname(__file__))</strong></p><h4 id="将相对目录拼到绝对路径构成一个新的绝对路径" tabindex="-1"><a class="header-anchor" href="#将相对目录拼到绝对路径构成一个新的绝对路径" aria-hidden="true">#</a> <strong>将相对目录拼到绝对路径构成一个新的绝对路径</strong></h4><p><strong>os.path.join(绝对路径,相对路径)</strong></p><p>如</p><p>os.path.join(&#39;d:\\\\anets&#39;,&#39;images&#39;)</p><p>拼接后变成</p><p>d:\\\\anets\\\\images</p><h3 id="hashlib库" tabindex="-1"><a class="header-anchor" href="#hashlib库" aria-hidden="true">#</a> <strong>hashlib库</strong></h3><h4 id="import-hashlib" tabindex="-1"><a class="header-anchor" href="#import-hashlib" aria-hidden="true">#</a> import hashlib</h4><h5 id="md5加密" tabindex="-1"><a class="header-anchor" href="#md5加密" aria-hidden="true">#</a> md5加密</h5><p>m=hashlib.md5()</p><p>m.update(需要加密的字符串)</p><p>md5=m.hexdigest() #md5为加密结果</p><p><img src="'+fa+'" alt="">{width=&quot;5.764583333333333in&quot; height=&quot;1.1944444444444444in&quot;}</p><h3 id="codecs-文件相关-能避免编码问题" tabindex="-1"><a class="header-anchor" href="#codecs-文件相关-能避免编码问题" aria-hidden="true">#</a> <strong>codecs --文件相关(能避免编码问题)</strong></h3><p>import codecs</p><h4 id="file-codecs-open-文件路径-模式-encoding" tabindex="-1"><a class="header-anchor" href="#file-codecs-open-文件路径-模式-encoding" aria-hidden="true">#</a> file=codecs.open(&quot;文件路径&quot;,模式，encoding=&quot;&quot;)</h4><p>文件路径可以是相对的</p><p>模式有：</p><p>&quot;w&quot; -&gt;可写</p><p>编码：在写的时候，一般使用utf-8</p><h5 id="file-write-字符串" tabindex="-1"><a class="header-anchor" href="#file-write-字符串" aria-hidden="true">#</a> file.write(&quot;字符串&quot;)</h5><h5 id="file-close" tabindex="-1"><a class="header-anchor" href="#file-close" aria-hidden="true">#</a> <strong>file.close()</strong></h5><h4 id="写文件的with写法" tabindex="-1"><a class="header-anchor" href="#写文件的with写法" aria-hidden="true">#</a> <strong>写文件的with写法</strong></h4><p>with open(&quot;文件路径&quot;,&quot;wb&quot;) as f:</p><p>f.write(内容)</p><p>f.close()</p><p>wb是二进制写的意思</p><h3 id="json库" tabindex="-1"><a class="header-anchor" href="#json库" aria-hidden="true">#</a> <strong>json库</strong></h3><p><strong>import json</strong></p><h4 id="将字典类型转换为json串-dump-字典-ensure-ascii-false" tabindex="-1"><a class="header-anchor" href="#将字典类型转换为json串-dump-字典-ensure-ascii-false" aria-hidden="true">#</a> 将字典类型转换为json串|dump(字典,ensure_ascii=False)</h4><p>ensure_ascii=False避免写入中文出错</p><h4 id="将数组转换为json串" tabindex="-1"><a class="header-anchor" href="#将数组转换为json串" aria-hidden="true">#</a> <strong>将数组转换为json串</strong></h4><p>dsn=[1,2,34]</p><p>json.dumps(dsn,ensure_ascii=False)</p><h3 id="mysqldb-数据库" tabindex="-1"><a class="header-anchor" href="#mysqldb-数据库" aria-hidden="true">#</a> <strong>MySQLdb -数据库</strong></h3><p>这个需要安装后并导入</p><p>pip install -i https://pypi.douban.com/simple mysqlclient</p><p>import MySQLdb</p><h4 id="获取连接-conn-mysqldb-connect-host-user-password-dbname-charset-utf8-use-unicode-true" tabindex="-1"><a class="header-anchor" href="#获取连接-conn-mysqldb-connect-host-user-password-dbname-charset-utf8-use-unicode-true" aria-hidden="true">#</a> 获取连接 | conn=MySQLdb.connect(&quot;host&quot;,&quot;user&quot;,&quot;password&quot;,&quot;dbname&quot;,charset=&quot;utf8&quot;,use_unicode=True)</h4><p>例如</p><p>conn=MySQLdb.connect(&quot;120.165.5.106&quot;,&quot;root&quot;,&quot;root&quot;,&quot;dbname&quot;,charset=&quot;utf8&quot;,use_unicode=True)</p><h5 id="获取游标对象-cursor-conn-cursor" tabindex="-1"><a class="header-anchor" href="#获取游标对象-cursor-conn-cursor" aria-hidden="true">#</a> <strong>获取游标对象|cursor=conn.cursor()</strong></h5><h6 id="执行sql语句-cursor-execute-sql语句-有占位符-s-占位符的值1-占位符的值2" tabindex="-1"><a class="header-anchor" href="#执行sql语句-cursor-execute-sql语句-有占位符-s-占位符的值1-占位符的值2" aria-hidden="true">#</a> 执行sql语句|cursor.execute(&quot;sql语句，有占位符%s&quot;，(占位符的值1，占位符的值2))</h6><h5 id="提交事务-conn-commit" tabindex="-1"><a class="header-anchor" href="#提交事务-conn-commit" aria-hidden="true">#</a> <strong>提交事务|conn.commit()</strong></h5><h3 id="正则re库" tabindex="-1"><a class="header-anchor" href="#正则re库" aria-hidden="true">#</a> 正则re库</h3><p>导入：</p><p>import re</p><h4 id="match-正则-需要匹配的字符串-判断字符串与正则是否匹配" tabindex="-1"><a class="header-anchor" href="#match-正则-需要匹配的字符串-判断字符串与正则是否匹配" aria-hidden="true">#</a> match(&quot;正则&quot;,&quot;需要匹配的字符串&quot;) | 判断字符串与正则是否匹配</h4><h3 id="python自带函数" tabindex="-1"><a class="header-anchor" href="#python自带函数" aria-hidden="true">#</a> python自带函数</h3><h4 id="filter-函数-过滤对象-过滤" tabindex="-1"><a class="header-anchor" href="#filter-函数-过滤对象-过滤" aria-hidden="true">#</a> filter(函数,过滤对象) | 过滤</h4><p>需要在函数中返回true或者false ，true则保留，false则去除</p><p><img src="'+xa+'" alt="">{width=&quot;3.1in&quot; height=&quot;0.8166666666666667in&quot;}</p><h4 id="匿名函数-没有函数名-自动返回" tabindex="-1"><a class="header-anchor" href="#匿名函数-没有函数名-自动返回" aria-hidden="true">#</a> 匿名函数---没有函数名，自动返回</h4><p>myadd = lambda x, y: x + y</p><p>myadd(1,2)</p><h3 id="random" tabindex="-1"><a class="header-anchor" href="#random" aria-hidden="true">#</a> <strong>random</strong></h3><h4 id="生成0-9随机数-random-randint-0-9" tabindex="-1"><a class="header-anchor" href="#生成0-9随机数-random-randint-0-9" aria-hidden="true">#</a> 生成0-9随机数|random.randint(0,9)</h4><h1 id="完整项目开发流程" tabindex="-1"><a class="header-anchor" href="#完整项目开发流程" aria-hidden="true">#</a> 完整项目开发流程</h1><h2 id="初始化项目" tabindex="-1"><a class="header-anchor" href="#初始化项目" aria-hidden="true">#</a> <strong>初始化项目</strong></h2><h3 id="环境搭建-1" tabindex="-1"><a class="header-anchor" href="#环境搭建-1" aria-hidden="true">#</a> 环境搭建</h3><p>略</p><h3 id="新建项目-1" tabindex="-1"><a class="header-anchor" href="#新建项目-1" aria-hidden="true">#</a> 新建项目</h3><p>0 workon命令 查看虚拟环境是否正常和查看已经安装的项目</p><p>1首先通过虚拟环境管理创建项目</p><p>mkvirtualenv 项目名 （使用默认python环境）</p><p>或者mkvirtualenv --python D:\\Develop\\python\\python.exe 项目名</p><p>2创建后会自动进入该目录或使用</p><p>或使用 workon 项目名</p><p>进入项目目录</p><h3 id="安装scrapy依赖-1" tabindex="-1"><a class="header-anchor" href="#安装scrapy依赖-1" aria-hidden="true">#</a> 安装scrapy依赖</h3><p>3<strong>手动进入你的项目目录中</strong>，在项目目录安装依赖包</p><p>pip install -i https://pypi.douban.com/simple/ scrapy</p><h3 id="新建scrapy工程-1" tabindex="-1"><a class="header-anchor" href="#新建scrapy工程-1" aria-hidden="true">#</a> <strong>新建scrapy工程</strong></h3><p>**手动进入你的项目目录中，**再进入该项目的运行环境workon 项目名</p><p>运行命令：</p><p>scrapy startproject 工程名</p><p><img src="'+h+'" alt="">{width=&quot;5.761111111111111in&quot; height=&quot;1.3069444444444445in&quot;}</p><h3 id="导入项目" tabindex="-1"><a class="header-anchor" href="#导入项目" aria-hidden="true">#</a> 导入项目</h3><p><img src="'+wa+'" alt="">{width=&quot;5.425in&quot; height=&quot;6.283333333333333in&quot;}</p><h3 id="新建一个爬虫-scrapy-genspider-任务名-域名-1" tabindex="-1"><a class="header-anchor" href="#新建一个爬虫-scrapy-genspider-任务名-域名-1" aria-hidden="true">#</a> <strong>新建一个爬虫|scrapy genspider 任务名 域名</strong></h3><p>进入到工程目录运行</p><p>scrapy genspider 任务名 域名</p><p><img src="'+Aa+'" alt="">{width=&quot;5.763194444444444in&quot; height=&quot;0.7993055555555556in&quot;}</p><p>生成的文件</p><p><img src="'+ya+'" alt="">{width=&quot;5.759722222222222in&quot; height=&quot;3.3541666666666665in&quot;}</p><h3 id="禁止scrapy过滤不符合robot协议的url-1" tabindex="-1"><a class="header-anchor" href="#禁止scrapy过滤不符合robot协议的url-1" aria-hidden="true">#</a> <strong>禁止scrapy过滤不符合robot协议的url</strong></h3><p>不然爬虫很快就会停掉</p><p><img src="'+d+'" alt="">{width=&quot;5.767361111111111in&quot; height=&quot;4.519444444444445in&quot;}</p><h3 id="命令行运行爬虫任务-scrapy-crawl-任务名-1" tabindex="-1"><a class="header-anchor" href="#命令行运行爬虫任务-scrapy-crawl-任务名-1" aria-hidden="true">#</a> <strong>命令行运行爬虫任务|scrapy crawl 任务名</strong></h3><p><img src="'+p+'" alt="">{width=&quot;5.7652777777777775in&quot; height=&quot;3.142361111111111in&quot;}</p><h3 id="新建main-py调试运行爬虫任务-1" tabindex="-1"><a class="header-anchor" href="#新建main-py调试运行爬虫任务-1" aria-hidden="true">#</a> 新建main.py调试运行爬虫任务</h3><p>1</p><p><img src="'+_a+'" alt="">{width=&quot;5.7625in&quot; height=&quot;3.857638888888889in&quot;}</p><p>2配置虚拟环境python位置</p><p><img src="'+va+'" alt="">{width=&quot;5.764583333333333in&quot; height=&quot;1.9430555555555555in&quot;}</p><p>3在切换到工程目录运行</p><p><img src="'+ka+'" alt="">{width=&quot;5.766666666666667in&quot; height=&quot;3.18125in&quot;}</p><h2 id="项目流程" tabindex="-1"><a class="header-anchor" href="#项目流程" aria-hidden="true">#</a> 项目流程</h2><h3 id="配置useragent代理-突破反爬虫限制-防止封ip" tabindex="-1"><a class="header-anchor" href="#配置useragent代理-突破反爬虫限制-防止封ip" aria-hidden="true">#</a> 配置userAgent代理，突破反爬虫限制，防止封Ip</h3><p><img src="'+Ia+'" alt="">{width=&quot;5.7659722222222225in&quot; height=&quot;2.6465277777777776in&quot;}</p><p><img src="'+ja+'" alt="">{width=&quot;5.759027777777778in&quot; height=&quot;3.125in&quot;}</p><h3 id="爬取内容-scrapy模块" tabindex="-1"><a class="header-anchor" href="#爬取内容-scrapy模块" aria-hidden="true">#</a> 爬取内容-scrapy模块</h3><p>scrapy会自动爬取，如果不让它自动爬取（比如动态网页需要selenium），这时就需要在经过middlerware时中间处理，见前面</p><h4 id="爬取首页" tabindex="-1"><a class="header-anchor" href="#爬取首页" aria-hidden="true">#</a> 爬取首页</h4><p><img src="'+n+'" alt="">{width=&quot;5.767361111111111in&quot; height=&quot;4.090277777777778in&quot;}</p><h4 id="爬取详情页" tabindex="-1"><a class="header-anchor" href="#爬取详情页" aria-hidden="true">#</a> 爬取详情页</h4><p><img src="'+n+'" alt="">{width=&quot;5.767361111111111in&quot; height=&quot;4.090277777777778in&quot;}</p><h3 id="封装实体-item模块" tabindex="-1"><a class="header-anchor" href="#封装实体-item模块" aria-hidden="true">#</a> 封装实体--item模块</h3><h3 id="持久化实体到数据库-pipeline-模块" tabindex="-1"><a class="header-anchor" href="#持久化实体到数据库-pipeline-模块" aria-hidden="true">#</a> 持久化实体到数据库-pipeline-模块</h3><h1 id="常见非逻辑错误" tabindex="-1"><a class="header-anchor" href="#常见非逻辑错误" aria-hidden="true">#</a> 常见非逻辑错误</h1><h2 id="oserror-raw-write-returned-invalid-length-14-should-have-been-between-0-and-7" tabindex="-1"><a class="header-anchor" href="#oserror-raw-write-returned-invalid-length-14-should-have-been-between-0-and-7" aria-hidden="true">#</a> OSError: raw write() returned invalid length 14 (should have been between 0 and 7)</h2><p>使用pip install win_unicode_console安装win_unicode_console，在代码文件main.py中添加以下两行代码解决：</p><p>import win_unicode_console</p><p>win_unicode_console.enable()</p><h1 id="python基础" tabindex="-1"><a class="header-anchor" href="#python基础" aria-hidden="true">#</a> python基础</h1><h2 id="语句" tabindex="-1"><a class="header-anchor" href="#语句" aria-hidden="true">#</a> 语句</h2><h3 id="while循环" tabindex="-1"><a class="header-anchor" href="#while循环" aria-hidden="true">#</a> while循环</h3><p><img src="'+Xa+'" alt="">{width=&quot;1.7166666666666666in&quot; height=&quot;1.0583333333333333in&quot;}</p>',603);function Ta(Ja,Ha){const i=u("ExternalLinkIcon");return g(),l("div",null,[Ca,t("p",null,[e("pip install -i "),t("a",Va,[e("https://pypi.douban.com/simple/"),s(i)]),e(" django （网址百度搜索豆瓣源获得,注意协议头可能加https才有效）")]),Da,t("p",null,[t("a",Ea,[e("https://www.lfd.uci.edu/~gohlke/pythonlibs/"),s(i)])]),Ua,t("p",null,[e("pip install -i "),t("a",Oa,[e("https://pypi.douban.com/simple"),s(i)]),e(" pillow")]),za,t("p",null,[e("首先，需要安装requests :pip install -i "),t("a",Sa,[e("https://pypi.douban.com/simple"),s(i)]),e(" requests")]),Wa])}const Pa=c(Ra,[["render",Ta],["__file","Scrapypachongkuangjia.html.vue"]]);export{Pa as default};
